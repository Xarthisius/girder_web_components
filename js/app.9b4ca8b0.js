(function(t){function e(e){for(var a,o,n=e[0],l=e[1],c=e[2],u=0,p=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,n=1;n<s.length;n++){var l=s[n];0!==r[l]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},r={app:0},i=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;i.push(["a1ec","chunk-vendors"]),s()})({"0936":function(t,e,s){"use strict";var a=s("c898"),r=s.n(a);r.a},"0e3a":function(t,e,s){"use strict";var a=s("8991"),r=s.n(a);r.a},"11a7":function(t,e,s){},"23cb":function(t,e,s){"use strict";var a=s("8ff5"),r=s.n(a);r.a},"28e0":function(t,e,s){"use strict";var a=s("84c2"),r=s.n(a);r.a},"406f":function(t,e,s){},"84c2":function(t,e,s){},8991:function(t,e,s){},"8d4c":function(t,e,s){"use strict";var a=s("a033"),r=s.n(a);r.a},"8ff5":function(t,e,s){},"98e3":function(t,e,s){},a033:function(t,e,s){},a1ec:function(t,e,s){"use strict";s.r(e);var a=s("a026"),r=s("3003"),i=s("f309"),o=(s("41e6"),s("bf40"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"girder-authentication-component"},[s("v-tabs",{attrs:{"background-color":"primary",dark:""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[s("v-tabs-slider",{attrs:{color:"yellow"}}),s("v-tab",{key:"login"},[t._v("Log In")]),t.register?s("v-tab",{key:"registration"},[t._v("Register")]):t._e()],1),s("v-tabs-items",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[s("v-tab-item",{key:"login-box"},[s("girder-login",{attrs:{"oauth-providers":t.oauthProviders,"force-otp":t.forceOtp,"forgot-password-url":t.forgotPasswordUrl,"forgot-password-route":t.forgotPasswordRoute},on:{forgotpassword:function(e){return t.$emit("forgotpassword")}}})],1),t.register?s("v-tab-item",{key:"registration-box"},[s("girder-registration",{attrs:{"oauth-providers":t.oauthProviders}})],1):t._e()],1)],1)}),n=[],l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-widget"},[t._l(t.alerts.errors,function(e){return s("v-alert",{key:e,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!!e,type:"error"}},[t._v(t._s(e))])}),s("v-container",[s("v-form",{ref:"login",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[!t.otpFormVisible||t.forceOtp?s("v-text-field",{attrs:{label:"Username or e-mail",autofocus:"",rules:t.nonEmptyRules,"prepend-icon":"$vuetify.icons.user",type:"text"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}):t._e(),!t.otpFormVisible||t.forceOtp?s("v-text-field",{attrs:{type:"password",label:"Password",rules:t.nonEmptyRules,"prepend-icon":"$vuetify.icons.lock"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}):t._e(),t.otpFormVisible||t.forceOtp?s("v-text-field",{attrs:{type:"text",label:"Authentication code",rules:t.otpRules,"prepend-icon":"$vuetify.icons.otp"},model:{value:t.otp,callback:function(e){t.otp=e},expression:"otp"}}):t._e(),s("v-card-actions",[s("v-btn",{staticClass:"ml-0",attrs:{type:"submit",color:"primary",disabled:t.inProgress,loading:t.inProgress}},[s("v-icon",{attrs:{left:""}},[t._v("$vuetify.icons.login")]),t._v(t._s(t.otpFormVisible?"Verify code":"Login"))],1),s("v-spacer"),s("v-btn",{attrs:{text:"",color:"primary",to:t.forgotPasswordRoute,href:t.forgotPasswordUrl},on:{click:function(e){return t.$emit("forgotpassword")}}},[t._v("Forgot Password?")])],1)],1)],1),t.oauthProviders&&t.oauthProviders.length?[s("v-divider"),s("girder-oauth",{attrs:{providers:t.oauthProviders}})]:t._e()],2)},c=[],d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"oauth-widget"},[s("h4",[t._v("Or "+t._s(t.verb)+" with OAuth")]),t._l(t.providers,function(e){return s("v-btn",{key:e.id,staticClass:"ml-0 mr-3",attrs:{dark:t.iconMap[e.id].dark,color:t.iconMap[e.id].color,href:e.url}},[s("v-icon",{attrs:{left:""}},[t._v(t._s(t.$vuetify.icons.values[t.iconMap[e.id].icon]))]),t._v(t._s(e.name))],1)})],2)},u=[];const p={github:{dark:!0,icon:"github"},google:{dark:!0,icon:"google",color:"#3367d6"},linkedin:{dark:!0,icon:"linkedin",color:"#283e4a"},bitbucket:{dark:!1,icon:"bitbucket"},box:{dark:!0,icon:"box_com",color:"#0071f7"},globus:{dark:!0,icon:"globus",color:"#335a95"}};var h={props:{verb:{type:String,default:"sign in"},providers:{type:Array,required:!0}},data(){return{enabledProviders:[],iconMap:p}}},m=h,f=s("2877"),g=s("6544"),v=s.n(g),b=s("8336"),y=s("a523"),w=s("132d"),_=Object(f["a"])(m,d,u,!1,null,null,null),x=_.exports;v()(_,{VBtn:b["a"],VContainer:y["a"],VIcon:w["a"]});const k="authentication must include a one-time password",C=[t=>!!t||"Item is required"],$=[t=>{const e="6 digit number";try{return parseInt(t,10)&&6===String(t).length||e}catch(s){return e}}];var R={inject:["girderRest"],components:{GirderOauth:x},props:{forceOtp:{type:Boolean,default:!1},forgotPasswordUrl:{type:String,default:null},forgotPasswordRoute:{type:Object,default:null},oauthProviders:{type:Array,default:()=>[]}},data(){return{username:"",password:"",otp:null,inProgress:!1,alerts:{errors:[]},nonEmptyRules:C,otpRules:$,otpFormVisible:!1}},methods:{async login(){if(this.$refs.login.validate()){this.alerts.errors=[],this.inProgress=!0;try{await this.girderRest.login(this.username,this.password,this.otp),this.password="",this.otp=null,this.otpFormVisible=!1}catch(t){if(!t.response||401!==t.response.status)throw this.alerts.errors.push("Unknown error."),t;{const{message:e}=t.response.data;e&&e.indexOf(k)>=0?(this.otp=null,this.otpFormVisible=!0,this.$refs.login.resetValidation()):this.alerts.errors.push(e||"Unauthorized.")}}finally{this.inProgress=!1}}}}},T=R,j=s("0798"),V=s("99d9"),S=s("ce7e"),P=s("4bd4"),O=s("2fa4"),E=s("8654"),I=Object(f["a"])(T,l,c,!1,null,null,null),L=I.exports;v()(I,{VAlert:j["a"],VBtn:b["a"],VCardActions:V["a"],VContainer:y["a"],VDivider:S["a"],VForm:P["a"],VIcon:w["a"],VSpacer:O["a"],VTextField:E["a"]});var F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"register-widget"},[t._l(t.alerts.errors,function(e){return s("v-alert",{key:e,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!0,type:"error"}},[t._v(t._s(e))])}),t._l(t.alerts.infos,function(e){return s("v-alert",{key:e,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!0,type:"info"}},[t._v(t._s(e))])}),s("v-container",[s("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[s("v-text-field",{attrs:{label:"Username",rules:t.nonEmptyRules,type:"text",autofocus:""},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}}),s("v-text-field",{attrs:{label:"Email",rules:t.nonEmptyRules,type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("v-text-field",{attrs:{label:"First Name",rules:t.nonEmptyRules,type:"text"},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),s("v-text-field",{attrs:{label:"Last Name",rules:t.nonEmptyRules,type:"text"},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}),s("v-text-field",{attrs:{type:"password",label:"Password",rules:t.nonEmptyRules},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("v-text-field",{attrs:{type:"password",label:"Retype password",rules:t.retypeMustMatchPasswordRules},model:{value:t.retypePassword,callback:function(e){t.retypePassword=e},expression:"retypePassword"}}),s("v-btn",{staticClass:"ml-0",attrs:{type:"submit",color:"primary",loading:t.inProgress}},[t._v("Register")])],1)],1),t.oauthProviders&&t.oauthProviders.length?[s("v-divider"),s("girder-oauth",{attrs:{verb:"register",providers:t.oauthProviders}})]:t._e()],2)},D=[],U={inject:["girderRest"],components:{GirderOauth:x},props:{oauthProviders:{type:Array,default:()=>[]}},data(){const t=[t=>!!t||"Item is required"],e=[...t,t=>t===this.password||"Passwords must match"];return{login:"",email:"",firstName:"",lastName:"",password:"",retypePassword:"",retypePasswordErrors:[],inProgress:!1,alerts:{errors:[],infos:[]},nonEmptyRules:t,retypeMustMatchPasswordRules:e}},methods:{async register(){if(this.$refs.form.validate()){this.inProgress=!0,this.alerts.errors=[],this.alerts.infos=[];try{const e=await this.girderRest.register(this.login,this.email,this.firstName,this.lastName,this.password);e.data.authToken||(this.alerts.infos.push("Registration needs email verification or administrator approval. \nCheck your email to continue."),this.$refs.form.reset())}catch(t){if(!t.response||400!==t.response.status)throw this.alerts.errors.push("Unknown error."),t;this.alerts.errors.push(t.response.data.message||"Invalid registration.")}finally{this.inProgress=!1}}}}},M=U,N=Object(f["a"])(M,F,D,!1,null,null,null),B=N.exports;v()(N,{VAlert:j["a"],VBtn:b["a"],VContainer:y["a"],VDivider:S["a"],VForm:P["a"],VTextField:E["a"]});var z=s("bc3a"),A=s.n(z),q=s("a78e"),G=s.n(q),J=s("4328");const H=64,W="#girderToken=",Q="__",K="Girder-Token",Y="Girder-OTP",X="Girder-Authorization";function Z(t){G.a.set("girderToken",t.token,{expires:new Date(t.expires)})}function tt(t){const e=t.hash.split(W),s=e[e.length-1].split(Q)[0];if(s.length===H){const e=new Date;e.setDate((new Date).getDate()+365),Z({token:s,expires:e}),t.hash=t.hash.replace(`${W}${s}${Q}`,"")}return s}class et extends a["a"]{constructor({apiRoot:t="/api/v1",token:e=G.a.get("girderToken")||tt(window.location),axios:s=A.a.create(),useGirderAuthorizationHeader:a=!1,setLocalCookie:r=!0}={}){super({data:{user:null,token:e}}),Object.assign(this,s,{apiRoot:t,setLocalCookie:r,useGirderAuthorizationHeader:a}),this.interceptors.request.use(t=>({...t,baseURL:this.apiRoot,headers:{[K]:this.token,...t.headers}}))}async login(t,e,s=null){try{await this.logout()}catch(o){}let a;const r={[K]:null};this.useGirderAuthorizationHeader?r[X]=`Basic ${window.btoa(`${t}:${e}`)}`:a={username:t,password:e},s&&(r[Y]=s);const i=await this.get("user/authentication",{headers:r,auth:a});return this.token=i.data.authToken.token,this.user=i.data.user,this.setLocalCookie&&Z(i.data.authToken),this.$emit("login",this.user),i}async logout(){if(this.token)try{await this.delete("user/authentication")}catch(t){if(401!==t.response.status)throw t}finally{this.token=null,this.user=null,G.a.remove("girderToken"),this.$emit("logout")}}async fetchUser(){const t=await this.get("user/me");return this.user=t.data,null===this.user&&(this.token=null),this.user}async register(t,e,s,a,r,i=!1){const o=await this.post("user",Object(J["stringify"])({login:t,email:e,firstName:s,lastName:a,password:r,admin:i}));return o.data.authToken?(this.token=o.data.authToken.token,this.user=o.data,this.setLocalCookie&&Z(o.data.authToken),this.$emit("register",this.user),this.$emit("login",this.user),o):o}}var st={inject:["girderRest"],components:{GirderLogin:L,GirderRegistration:B},props:{register:{type:Boolean,default:!1},oauth:{type:Boolean,default:!1},forgotPasswordUrl:{type:String,default:null},forgotPasswordRoute:{type:[Object,String],default:null},forceOtp:{type:Boolean,default:!1}},data(){return{activeTab:null}},asyncComputed:{async oauthProviders(){if(!this.oauth)return[];try{return(await this.girderRest.get("oauth/provider",{params:{redirect:`${window.location.href}${W}{girderToken}${Q}`,list:!0}})).data}catch(t){return[]}}}},at=st,rt=s("b0af"),it=s("71a3"),ot=s("c671"),nt=s("fe57"),lt=s("aac8"),ct=s("9a96"),dt=Object(f["a"])(at,o,n,!1,null,null,null),ut=dt.exports;v()(dt,{VCard:rt["a"],VTab:it["a"],VTabItem:ot["a"],VTabs:nt["a"],VTabsItems:lt["a"],VTabsSlider:ct["a"]});var pt=ut,ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"girder-breadcrumb-component"},[t.girderRest.user&&!t.readonly?s("v-icon",{staticClass:"home-button mr-3",attrs:{color:"accent",disabled:t.location._id===t.girderRest.user._id},on:{click:function(e){return t.$emit("crumbclick",t.girderRest.user)}}},[t._v("$vuetify.icons.userHome")]):t._e(),s("v-breadcrumbs",{staticClass:"font-weight-bold pa-0",attrs:{items:t.breadcrumb},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item;return[s("v-breadcrumbs-item",{attrs:{tag:"a",disabled:t.readonly||t.breadcrumb.indexOf(a)==t.breadcrumb.length-1},on:{click:function(e){return t.$emit("crumbclick",a)}}},[-1!==["folder","user","collection"].indexOf(a.type)?[t._v(t._s(a.name))]:"users"===a.type?[s("v-icon",{staticClass:"mdi-18px"},[t._v("$vuetify.icons.user")])]:"collections"===a.type?[s("v-icon",{staticClass:"mdi-18px"},[t._v("$vuetify.icons.collection")])]:"root"===a.type?[s("v-icon",{staticClass:"mdi-18px"},[t._v("$vuetify.icons.globe")])]:s("span",{staticClass:"accent--text"},[t._v(t._s(a))])],2)]}}])},[s("span",{staticClass:"subheading font-weight-bold",attrs:{slot:"divider",disabled:t.readonly},slot:"divider"},[t._v("/")])])],1)},mt=[];const ft={methods:{formatSize(t,{base:e=1024,unit:s="B"}={}){if(t<e)return`${t} ${s}`;let a,r=t;for(a=0;r>=e&&a<4;a+=1)r/=e;return`${r.toFixed(2)}  ${["","K","M","G","T"][a]}${s}`}}},gt={methods:{progressPercent(t){return t.total?Math.round(100*(t.current||0)/t.total):0}}};var vt=s("fcf4"),bt={theme:{dark:!1,themes:{light:{primary:vt["a"].lightBlue.darken1,secondary:vt["a"].blueGrey,accent:vt["a"].lightBlue.darken1,error:vt["a"].red,info:vt["a"].lightBlue.lighten1}}},icons:{iconfont:"mdi",values:{alert:"mdi-alert-circle",bitbucket:"mdi-bitbucket",box_com:"mdi-package",chevron:"mdi-chevron-right",circle:"mdi-checkbox-blank-circle",collection:"mdi-file-tree",edit:"mdi-pencil",file:"mdi-file",fileNew:"mdi-file-plus",fileUpload:"mdi-file-upload",folder:"mdi-folder",folderNew:"mdi-folder-plus",github:"mdi-github-circle",globe:"mdi-earth",globus:"mdi-earth",google:"mdi-google",group:"mdi-account-multiple",item:"mdi-file",linkedin:"mdi-linkedin",lock:"mdi-lock",login:"mdi-login",logout:"mdi-logout",more:"mdi-dots-horizontal",otp:"mdi-shield-key",preview:"mdi-file-find",search:"mdi-magnify",settings:"mdi-tune",user:"mdi-account",userHome:"mdi-home-account"}}};class yt{constructor(t){Object.assign(this,t,{etags:{},offset:0,partNumber:1})}_finalizeMultipartXml(){const t=document.implementation.createDocument(null,null,null),e=t.createElement("CompleteMultipartUpload");return Object.entries(this.etags).forEach(([s,a])=>{const r=t.createElement("Part"),i=t.createElement("PartNumber"),o=t.createElement("ETag");i.appendChild(t.createTextNode(s)),o.appendChild(t.createTextNode(a)),r.appendChild(i),r.appendChild(o),e.appendChild(r)}),e.outerHTML}async _multiChunkUpload(){const{headers:t,method:e,url:s}=this.upload.s3.request,a=await A.a.request({data:null,headers:t,method:e,url:s}),r=(new DOMParser).parseFromString(a.data,"text/xml");return this.upload.s3.uploadId=r.querySelector("InitiateMultipartUploadResult > UploadId").textContent,this._sendChunks()}async _sendChunks(){const t=t=>this.progress({current:this.offset+t.loaded,total:this.file.size,indeterminate:!t.lengthComputable});while(this.offset<this.file.size){const e=this.file.slice(this.offset,this.offset+this.upload.s3.chunkLength),{method:s,url:a}=(await this.$rest.post("file/chunk",Object(J["stringify"])({chunk:JSON.stringify({contentLength:e.size,partNumber:this.partNumber,s3UploadId:this.upload.s3.uploadId}),offset:0,uploadId:this.upload._id}))).data.s3.request,r=await A.a.request({data:e,method:s,url:a,onUploadProgress:t});this.etags[this.partNumber]=r.headers.etag,this.partNumber+=1,this.offset+=e.size}this.progress({indeterminate:!0});const e=await this.$rest.post("file/completion",Object(J["stringify"])({uploadId:this.upload._id})),{headers:s,method:a,url:r}=e.data.s3FinalizeRequest;return await A.a.request({data:this._finalizeMultipartXml(),headers:s,method:a,url:r}),e.data}async start(){if(this.upload.s3.chunked)return this._multiChunkUpload();const{headers:t,method:e,url:s}=this.upload.s3.request;return await A.a.request({data:this.file,headers:t,method:e,url:s,onUploadProgress:t=>this.progress({current:t.loaded,total:this.file.size,indeterminate:!t.lengthComputable})}),this.progress({indeterminate:!0}),(await this.$rest.post("file/completion",Object(J["stringify"])({uploadId:this.upload._id}))).data}async resume(){return this.upload.s3.chunked?this._sendChunks():(this.upload.s3.request=(await this.$rest.get(`file/offset?uploadId=${this.upload._id}`)).data,this.start())}}class wt{constructor(t,{$rest:e,parent:s,progress:a=(()=>null)}={}){Object.assign(this,{$rest:e,file:t,parent:s,progress:a})}async start(){throw new Error("not implemented")}async resume(){return this.start()}beforeUpload(){}afterUpload(){}onError(t){}}const _t=67108864,xt={s3:yt};class kt extends wt{constructor(t,{$rest:e,parent:s,progress:a=(()=>null),params:r={},chunkLen:i=_t}={}){super(t,{$rest:e,parent:s,progress:a}),Object.assign(this,{params:r,chunkLen:i,upload:null,offset:0,behavior:null})}async _sendChunks(){const t=t=>this.progress({indeterminate:!t.lengthComputable,current:this.offset+t.loaded,size:this.file.size});while(this.offset<this.file.size){const e=Math.min(this.offset+this.chunkLen,this.file.size),s=this.file.slice(this.offset,e),a=`file/chunk?offset=${this.offset}&uploadId=${this.upload._id}`;this.upload=(await this.$rest.post(a,s,{onUploadProgress:t,headers:{"Content-Type":"application/octet-stream"}})).data,this.offset=e}return this.upload}async start(){return this.upload=(await this.$rest.post("/file",Object(J["stringify"])({parentType:this.parent._modelType,parentId:this.parent._id,name:this.file.name,size:this.file.size,mimeType:this.file.type,...this.params}))).data,this.upload.behavior&&xt[this.upload.behavior]?(this.behavior=new xt[this.upload.behavior](this),this.behavior.start()):this._sendChunks()}async resume(){return this.upload?(this.progress({indeterminate:!0}),this.behavior?this.behavior.resume():(this.offset=(await this.$rest.get(`file/offset?uploadId=${this.upload._id}`)).data.offset,this._sendChunks())):this.start()}}class Ct extends a["a"]{constructor(t=200){super({data(){return{flag:!1}}}),this.count=0,this.delay=t,this.timeout=null}inc(){this.count+=1,this.count>0&&this._toggleFlag(!0)}dec(){this.count=Math.max(0,this.count-1),0===this.count&&this._toggleFlag(!1)}_toggleFlag(t){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.flag=t},this.delay)}}function $t(t){return t._modelType||t.type}function Rt(t){const e=$t(t);return["collections","users","root"].indexOf(e)>=0}function Tt(t){const e=$t(t);switch(e){case"collections":return"collection";case"users":return"user";default:return""}}function jt(t){return e=>{return!!e&&(Rt(e)?t:!!e._id)}}var Vt={props:{location:{type:Object,required:!0,validator:jt(!0)},readonly:{type:Boolean,default:!1},append:{type:Array,default:()=>[]},rootLocationDisabled:{type:Boolean,default:!1}},inject:["girderRest"],data(){return{loading:!1}},computed:{breadcrumb(){const{append:t}=this;return[...this.pathBreadcrumb,...t]}},asyncComputed:{pathBreadcrumb:{default:[],async get(){this.loading=!0;const t=[],{rootLocationDisabled:e,girderRest:s,location:a}=this,{user:r}=s,i=$t(a),{name:o,_id:n}=a;if("folder"===i){if(o)t.unshift(this.extractCrumbData(a));else{const{data:e}=await this.girderRest.get(`folder/${n}`);t.unshift(this.extractCrumbData(e))}const{data:e}=await this.girderRest.get(`folder/${n}/rootpath`);e.reverse().forEach(e=>{t.unshift(this.extractCrumbData(e.object))})}else if("user"===i||"collection"===i){const{data:e}=await this.girderRest.get(`${i}/${n}`);t.unshift(this.extractCrumbData(e))}return e||(("users"===i||r&&t.length&&"user"===t[0].type)&&t.unshift({type:"users"}),("collections"===i||t.length&&"collection"===t[0].type)&&t.unshift({type:"collections"}),t.unshift({type:"root"})),this.loading=!1,t}}},created(){if(!jt(!this.rootLocationDisabled)(this.location))throw new Error("root location cannot be used when root-location-disabled is true")},methods:{extractCrumbData(t){return{...t,type:t.type?t.type:t._modelType,name:"user"!==t._modelType?t.name:t.login}}}},St=Vt,Pt=(s("28e0"),s("2bc5")),Ot=s("f625"),Et=Object(f["a"])(St,ht,mt,!1,null,null,null),It=Et.exports;v()(Et,{VBreadcrumbs:Pt["a"],VBreadcrumbsItem:Ot["a"],VIcon:w["a"]});var Lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("girder-data-table",{staticClass:"girder-file-browser",attrs:{draggable:t.draggable,rows:t.rows,options:t.options,"server-items-length":t.serverItemsLength,loading:t.loading,selectable:t.internalSelectable},on:{"update:options":function(e){t.options=e},rowclick:t.rowClick,drag:function(e){return t.$emit("drag",e)},dragstart:function(e){return t.$emit("dragstart",e)},dragend:function(e){return t.$emit("dragend",e)},drop:function(e){return t.$emit("drop",e)}},scopedSlots:t._u([{key:"header",fn:function(e){return[s("tr",{staticClass:"secondary lighten-5"},[t.internalSelectable?s("th",{staticClass:"pl-3 pr-0",attrs:{width:"1%"}},[s("v-checkbox",{staticClass:"secondary--text text--darken-1 pr-2",attrs:{color:"accent","hide-details":"","input-value":e.all,indeterminate:t.selected.length>0&&!e.all},nativeOn:{click:function(e){return t.toggleAll(e)}}})],1):t._e(),s("th",{staticClass:"pl-3",attrs:{colspan:"10",width:"99%"}},[s("v-row",{staticClass:"ma-1"},[t._t("breadcrumb",null,null,{location:t.location,changeLocation:t.changeLocation,rootLocationDisabled:t.rootLocationDisabled}),s("v-spacer"),t._t("headerwidget",null,null,{location:t.location,changeLocation:t.changeLocation,rootLocationDisabled:t.rootLocationDisabled})],2)],1)])]}}],null,!0),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})},Ft=[],Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-data-table",{staticClass:"girder-data-table",attrs:{"show-select":"","headers-length":4,value:t.value,options:t.options,items:t.rows,"server-items-length":t.serverItemsLength,loading:!!t.loading&&"accent","item-key":"_id"},on:{input:function(e){return t.$emit("input",e)},"update:options":function(e){return t.$emit("update:options",e)}},scopedSlots:t._u([{key:"header",fn:function(e){var s=e.all,a=e.indeterminate,r=e.headers;return[t._t("header",null,null,{all:s,indeterminate:a,headers:r})]}},{key:"item",fn:function(e){return[s("tr",{key:e.index,staticClass:"itemRow",class:t.getRowClass(e.item),attrs:{draggable:t.draggable,active:e.isSelected},on:{click:function(s){return t.handleRowSelect(s,e)},drag:function(s){return t.$emit("drag",{items:[e],event:s})},dragstart:function(s){return t.$emit("dragstart",{items:[e],event:s})},dragend:function(s){return t.$emit("dragend",{items:[e],event:s})},drop:function(s){return t.$emit("drop",{items:[e],event:s})}}},[t.selectable?s("td",{staticClass:"pl-3 pr-0"},[s("v-checkbox",{staticClass:"secondary--text text--darken-1",attrs:{"input-value":e.isSelected,accent:"","hide-details":""},on:{change:e.select}})],1):t._e(),s("td",{staticClass:"pl-3",attrs:{colspan:"2"}},[s("span",{staticClass:"text-container secondary--text text--darken-3 nobreak",class:t.getItemClass(e.item),on:{click:function(s){return s.stopPropagation(),t.$emit("rowclick",e.item)}}},[s("v-icon",{staticClass:"pr-2",attrs:{color:e.isSelected?"accent":""}},[t._v(t._s(t.$vuetify.icons.values[e.item.icon]))]),t._v(t._s(e.item.name))],1)]),s("td",{staticClass:"text-right secondary--text text--darken-3 nobreak"},[t._v(t._s(e.item.size))])])]}},{key:"no-data",fn:function(){return[s("div",{staticClass:"text-center",attrs:{width:"100%"}},[t._v("No Data Available")])]},proxy:!0},{key:"no-results",fn:function(){return[s("div",{staticClass:"text-center",attrs:{width:"100%"}},[t._v("No Data Available")])]},proxy:!0}],null,!0)})},Ut=[],Mt={props:{draggable:{type:Boolean,default:!1},loading:{type:Boolean,required:!0},options:{type:Object,required:!0},rows:{type:Array,required:!0},selectable:{type:Boolean,required:!0},serverItemsLength:{type:Number,required:!0},value:{type:Array,default:()=>[]}},data(){return{lastCheckBoxIdx:null}},methods:{getLocationType:$t,isRootLocation:Rt,handleRowSelect({shiftKey:t},e){if(this.selectable){if(e.isSelected=!e.isSelected,t&&null!==this.lastCheckBoxIdx){const[t,s]=[this.lastCheckBoxIdx,e.index+1].sort(),a=this.rows.slice(t,s).filter(t=>void 0===this.value.find(e=>e._id===t._id));this.$emit("input",a.concat(this.value))}this.lastCheckBoxIdx=e.index}else this.$emit("rowclick",e.item)},getRowClass(t){const e=!this.selectable&&"folder"===$t(t)||Rt(t)||"user"===$t(t);return{"select-cursor":e}},getItemClass(t){const e="item"!==$t(t);return{"select-cursor":e}}}},Nt=Mt,Bt=(s("8d4c"),s("ac7c")),zt=s("8fea"),At=Object(f["a"])(Nt,Dt,Ut,!1,null,null,null),qt=At.exports;v()(At,{VCheckbox:Bt["a"],VDataTable:zt["a"],VIcon:w["a"]});const Gt="folder",Jt="item";var Ht={components:{GirderDataTable:qt},mixins:[ft],inject:["girderRest"],props:{draggable:{type:Boolean,default:!1},location:{type:Object,required:!0,validator:jt(!0)},selectable:{type:Boolean,default:!1},noRootLocation:{type:Boolean,default:!1},upload:{type:Boolean,default:!1},rootLocationDisabled:{type:Boolean,default:!1}},data(){return{options:{itemsPerPage:10,page:1},internalRefreshCounter:0,rows:[],rowsLoading:!1,selected:[]}},computed:{loading(){return this.rowsLoading},serverItemsLength(){return Object.values(this.counts).reduce((t,e)=>t+e,0)},internalSelectable(){return this.selectable&&this.location&&!Rt(this.location)}},asyncComputed:{counts:{default:{nFolders:0,nItems:0,nUsers:0,nCollections:0},async get(){const t={nFolders:0,nItems:0,nUsers:0,nCollections:0},e=$t(this.location),{_id:s}=this.location;if(-1!==["folder","user","collection"].indexOf(e)){const{data:a}=await this.girderRest.get(`${e}/${s}/details`);return{...t,nFolders:a.nFolders||0,nItems:a.nItems||0}}if("users"===e||"collections"===e){const{data:s}=await this.girderRest.get(`${this.getResourceType(e)}/details`);return{...t,[Object.keys(s)[0]]:Object.values(s)[0]}}return"root"===e?{...t,nUsers:1,nCollections:1}:t},watch(){return[this.internalRefreshCounter,this.location,this.girderRest.user]}}},watch:{location(t){jt(!this.rootLocationDisabled)(t)&&(this.options.page=1)},selected(t){this.$emit("selection-changed",t)},async counts(){this.rows=await this.fetchPaginatedRows()},async options(){this.rows=await this.fetchPaginatedRows()}},created(){if(!jt(!this.rootLocationDisabled)(this.location))throw new Error("root location cannot be used when root-location-disabled is true")},methods:{toggleAll(){this.selected.length===this.rows.length?this.selected=[]:this.selected=this.rows.slice()},rowClick(t){this.$emit("rowclick",t),"item"!==$t(t)&&this.changeLocation(t)},changeLocation(t){const{location:e}=this,s=$t(t),a=$t(e);e._id===t._id&&a===s||this.$emit("update:location",t)},refresh(){this.internalRefreshCounter+=1},async fetchPaginatedRows(){const{location:t,counts:e}=this;if(e.nFolders||e.nItems)return this.fetchPaginatedFolderRows();const s=$t(t);if("users"===s||"collections"===s){if(e.nUsers||e.nCollections){const e=Tt(t);return this.fetchPaginatedCollectionOrUserRows(e)}}else if("root"===s)return this.generateRootRows();return[]},async fetchPaginatedFolderRows(){this.rowsLoading=!0;const{counts:t,location:e,options:s}=this,{page:a,itemsPerPage:r}=s,i={parentType:e._modelType,parentId:e._id,limit:r>=0?r:null,offset:(a-1)*Math.abs(r)},o=t.nFolders>i.offset?r-(t.nFolders-i.offset):r,n=i.offset-t.nFolders,l={folderId:e._id,limit:r>=0?o:null,offset:n>0?n:0},c=[];c.push(this.girderRest.get(Gt,{params:i})),(l.limit>0||null===l.limit)&&"folder"===e._modelType&&c.push(this.girderRest.get(Jt,{params:l}));const d=(await Promise.all(c)).map(t=>t.data),u=[].concat.apply(...d).map(t=>({...t,size:t.size?this.formatSize(t.size):"",icon:t._modelType in this.$vuetify.icons.values?t._modelType:"file"}));return this.rowsLoading=!1,u},async fetchPaginatedCollectionOrUserRows(t){this.rowsLoading=!0;const{page:e,itemsPerPage:s}=this.options,{data:a}=await this.girderRest.get(t,{params:{limit:s>=0?s:null,offset:(e-1)*s}}),r=a.map(t=>({...t,name:"user"===t._modelType?`${t.firstName} ${t.lastName}`:t.name,size:t.size?this.formatSize(t.size):"",icon:t._modelType}));return this.rowsLoading=!1,r},generateRootRows(){const t=[{_modelType:"collections",name:"Collections",icon:"collection"}];return this.girderRest.user&&t.push({_modelType:"users",name:"Users",icon:"user"}),t},getResourceType(t){switch(t){case"collections":return"collection";case"users":return"user";default:return""}}}},Wt=Ht,Qt=s("0fd9"),Kt=Object(f["a"])(Wt,Lt,Ft,!1,null,null,null),Yt=Kt.exports;v()(Kt,{VCheckbox:Bt["a"],VRow:Qt["a"],VSpacer:O["a"]});var Xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"job-filter"},[s("h4",[t._v("Girder Worker Jobs")]),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{sm:"5",md:"4"}},[s("v-select",{attrs:{label:"Job Type",items:t.jobTypeList,value:t.jobType,clearable:"",color:"white","menu-props":{"content-class":"girder-job-filter-form-menu"},dense:""},on:{input:function(e){return t.$emit("update:jobType",e||null)}}})],1),s("v-col",{attrs:{sm:"5",md:"4"}},[s("v-select",{attrs:{label:"Status",items:t.statusItemList,value:t.status,clearable:"",color:"white","menu-props":{"content-class":"girder-job-filter-form-menu"},dense:""},on:{input:function(e){return t.$emit("update:status",e||null)}}})],1)],1)],1)},Zt=[];const te={INACTIVE:{value:0,text:"Inactive",icon:"mdi-pause",color:"grey lighten-1"},QUEUED:{value:1,text:"Queued",icon:"mdi-dots-horizontal",color:"yellow darken-2",indeterminate:!0},RUNNING:{value:2,text:"Running",icon:"mdi-autorenew",color:"light-blue",spin:!0},SUCCESS:{value:3,text:"Success",icon:"mdi-check-circle",color:"green"},ERROR:{value:4,text:"Error",icon:"mdi-alert-circle",color:"red"},CANCELED:{value:5,text:"Canceled",icon:"mdi-close-circle",color:"grey darken-1"},WORKER_FETCHING_INPUT:{value:820,text:"Fetching input",icon:"mdi-cloud-download",color:"light-blue lighten-2",indeterminate:!0},WORKER_CONVERTING_INPUT:{value:821,text:"Converting input",icon:"mdi-shuffle",color:"lime",indeterminate:!0},WORKER_CONVERTING_OUTPUT:{value:822,text:"Converting output",icon:"mdi-shuffle",color:"lime",indeterminate:!0},WORKER_PUSHING_OUTPUT:{value:823,text:"Pushing output",icon:"mdi-cloud-upload",color:"light-blue lighten-2",indeterminate:!0},WORKER_CANCELING:{value:824,text:"Canceling",icon:"mdi-alert",color:"grey darken-1",indeterminate:!0}};function ee(t){return Object.values(te).find(e=>e.value===t)}var se={props:{jobType:{type:[String,Object],default:null},jobTypeList:{type:Array,default(){return[]}},status:{type:[Number,Object],default:null},statusList:{type:Array,default(){return[]}}},data(){return{fromDateMenu:!1,toDateMenu:!1}},computed:{statusItemList(){return this.statusList.map(ee).filter(t=>t&&t.text).sort((t,e)=>{return t.text>e.text?1:t.text<e.text?-1:0})}}},ae=se,re=s("62ad"),ie=s("b974"),oe=Object(f["a"])(ae,Xt,Zt,!1,null,null,null),ne=oe.exports;v()(oe,{VCol:re["a"],VContainer:y["a"],VRow:Qt["a"],VSelect:ie["a"]});var le=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"girder-job-list",attrs:{dark:"",color:"primary"}},[s("v-card-title",[s("filter-form",{attrs:{"from-date":t.jobFilter.fromDate,"to-date":t.jobFilter.toDate,status:t.jobFilter.status,"job-type":t.jobFilter.jobType,"status-list":t.typeAndStatusList.statuses,"job-type-list":t.typeAndStatusList.types},on:{"update:fromDate":function(e){return t.$set(t.jobFilter,"fromDate",e)},"update:from-date":function(e){return t.$set(t.jobFilter,"fromDate",e)},"update:toDate":function(e){return t.$set(t.jobFilter,"toDate",e)},"update:to-date":function(e){return t.$set(t.jobFilter,"toDate",e)},"update:status":function(e){return t.$set(t.jobFilter,"status",e)},"update:jobType":function(e){return t.$set(t.jobFilter,"jobType",e)},"update:job-type":function(e){return t.$set(t.jobFilter,"jobType",e)}}})],1),s("job-table",{attrs:{jobs:t.jobs,options:t.options,"more-pages":t.morePages},on:{"update:options":function(e){t.options=e},"job-click":function(e,s){return t.$emit("job-click",e,s)}},scopedSlots:t._u([t.$scopedSlots.jobwidget?{key:"jobwidget",fn:function(e){return[t._t("jobwidget",null,null,e)]}}:null],null,!0)})],1)},ce=[],de=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-data-table",{attrs:{light:"","item-key":"_id",headers:t.headers_,items:t.items,"server-items-length":t.serverItemsLength,options:t.options},on:{"update:options":function(e){return t.$emit("update:options",e)}},scopedSlots:t._u([{key:"item",fn:function(e){return[s("tr",{on:{click:function(s){return t.$emit("job-click",s,e.item)}}},[s("td",{staticClass:"one-line"},[t._v(t._s(e.item.title))]),s("td",{staticClass:"one-line"},[t._v(t._s(e.item.type))]),s("td",{staticClass:"one-line"},[t._v(t._s(e.item.updateString))]),s("td",{staticClass:"one-line status-line",attrs:{nowrap:"",title:e.item.statusText,width:"1%"}},[s("v-row",{staticClass:"flex-nowrap ma-2",attrs:{align:"center"}},[s("v-progress-linear",{staticClass:"progress-bar mr-3",attrs:{color:e.item.statusColor,value:e.item.progressNumber,indeterminate:!!e.item.indeterminate,height:"10"}}),s("v-icon",{staticClass:"status-icon",class:{rotate:e.item.spin},attrs:{color:e.item.statusColor,size:20}},[t._v(t._s(e.item.statusIcon))])],1)],1),s("td",{staticClass:"one-line pa-0"},[t._t("jobwidget",null,null,e)],2)])]}},{key:"footer.page-text",fn:function(){return[s("div",{staticClass:"v-datatable__actions__options"},[t._v(t._s(t.pageRange.first)+"-"+t._s(t.pageRange.last))])]},proxy:!0}],null,!0)})},ue=[],pe=s("c1df"),he=s.n(pe),me={props:{jobs:{type:Array,required:!0},options:{type:Object,required:!0},morePages:{type:Boolean,default:!0}},data(){return{headers:[{text:"Job Title",value:"title"},{text:"Type",value:"type"},{text:"Last Updated",value:"updated"},{text:"Status",value:"status"}]}},computed:{items(){return this.jobs.map(this.mapJobToRow)},headers_(){const t={sortable:!1,align:"end"};return this.headers.concat(this.$scopedSlots.jobwidget?t:[])},serverItemsLength(){let{last:t}=this.pageRange;return this.morePages&&(t+=1),t},pageRange(){const t=this.options.itemsPerPage*(this.options.page-1)+1,e=t+this.jobs.length-1;return{first:t,last:e}}},methods:{mapJobToRow(t){const e=Object.assign({text:"Unknown"},ee(t.status));return Object.assign({statusText:e.text,statusColor:e.color,statusTextColor:e.textColor||"white",statusIcon:e.icon,updateString:he()(t.updated).format("dddd, MMMM D, YYYY @ h:mm a"),progressNumber:this.progressAsNumber(t.progress),indeterminate:e.indeterminate,spin:e.spin},t)},progressAsNumber(t){return t?t.current/t.total*100:100}}},fe=me,ge=(s("addb"),s("8e36")),ve=Object(f["a"])(fe,de,ue,!1,null,"0caa5262",null),be=ve.exports;v()(ve,{VDataTable:zt["a"],VIcon:w["a"],VProgressLinear:ge["a"],VRow:Qt["a"]});var ye={inject:["girderRest","notificationBus"],components:{JobTable:be,FilterForm:ne},data(){return{jobFilter:{fromDate:null,toDate:null,status:null,jobType:null},options:{itemsPerPage:10,page:1,sortBy:["updated"],descending:!0},morePages:!0,refresh:0}},watch:{jobFilter:{handler(){this.options.page=1},deep:!0}},asyncComputed:{jobs:{async get(){this.girderRest.user,this.refresh;const t=this.options,e={limit:t.itemsPerPage+1,offset:t.itemsPerPage*(t.page-1)};t.sortBy&&(e.sort=t.sortBy,e.sortdir=t.descending?-1:1),null!==this.jobFilter.status&&(e.statuses=JSON.stringify([this.jobFilter.status])),null!==this.jobFilter.jobType&&(e.types=JSON.stringify([this.jobFilter.jobType]));const s=await this.girderRest.get(`job?${Object(J["stringify"])(e)}`);return s.data.length<e.limit?this.morePages=!1:this.morePages=!0,s.data.slice(0,t.itemsPerPage)},default(){return[]}},typeAndStatusList:{async get(){this.girderRest.user;const t=await this.girderRest.get("job/typeandstatus");return t.data},default(){return{statuses:[],types:[]}}}},mounted(){this.refreshJobFunc=()=>{this.refreshJobList()},this.notificationBus.$on("message:job_status",this.refreshJobFunc),this.notificationBus.$on("message:job_created",this.refreshJobFunc)},beforeDestroy(){this.notificationBus.$off("message:job_status",this.refreshJobFunc),this.notificationBus.$off("message:job_created",this.refreshJobFunc)},methods:{refreshJobList(){this.refresh+=1}}},we=ye,_e=Object(f["a"])(we,le,ce,!1,null,null,null),xe=_e.exports;v()(_e,{VCard:rt["a"],VCardTitle:V["c"]});var ke=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"g-md-viewer",domProps:{innerHTML:t._s(t.markdown)}})},Ce=[],$e=s("d4cd"),Re=s.n($e),Te={props:{text:{default:"",type:String}},computed:{markdown(){return Re()({linkify:!0}).render(this.text)}}},je=Te,Ve=(s("23cb"),Object(f["a"])(je,ke,Ce,!1,null,null,null)),Se=Ve.exports,Pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"girder-markdown-editor"},[s("v-tabs",{staticClass:"md-tab",model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[s("v-tab",{key:"edit"},[t._v("Edit")]),s("v-tab-item",[s("v-textarea",{attrs:{"hide-details":"",filled:"","single-line":"",label:t.label,placeholder:t.placeholder},model:{value:t.text_,callback:function(e){t.text_=e},expression:"text_"}})],1),s("v-tab",{key:"preview"},[t._v("Preview")]),s("v-tab-item",{staticClass:"md-preview pa-2 grey lighten-3"},[s("girder-markdown",{attrs:{text:t.text_}})],1)],1),s("v-toolbar",{attrs:{dark:"",color:"secondary darken-2"}},[s("span",{staticClass:"hidden-xs-only"},[t._v("Supports"),s("a",{attrs:{href:"https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet"}},[t._v(" Markdown")])]),s("v-spacer"),s("v-toolbar-items",[s("v-btn",{class:{active:0===t.activeTab},attrs:{text:""},on:{click:function(e){t.activeTab=0}}},[s("v-row",{staticClass:"flex-column align-center justify-content",attrs:{"no-gutters":""}},[s("v-icon",{staticClass:"mdi-24px"},[t._v("$vuetify.icons.edit")]),s("span",{staticClass:"caption text-capitalize"},[t._v("Write")])],1)],1),s("v-btn",{class:{active:1===t.activeTab},attrs:{text:""},on:{click:function(e){t.activeTab=1}}},[s("v-row",{staticClass:"flex-column align-center justify-content",attrs:{"no-gutters":""}},[s("v-icon",{staticClass:"mdi-24px"},[t._v("$vuetify.icons.preview")]),s("span",{staticClass:"caption text-capitalize"},[t._v("Preview")])],1)],1)],1)],1)],1)},Oe=[],Ee={components:{GirderMarkdown:Se},model:{prop:"text",event:"changed"},props:{placeholder:{default:null,type:String},text:{default:"",type:String},label:{type:String,default:""}},data(){return{activeTab:0,text_:this.text}},watch:{text(){this.text_=this.text},text_(){this.$emit("changed",this.text_)}}},Ie=Ee,Le=(s("0e3a"),s("a844")),Fe=s("71d9"),De=s("2a7f"),Ue=Object(f["a"])(Ie,Pe,Oe,!1,null,null,null),Me=Ue.exports;v()(Ue,{VBtn:b["a"],VIcon:w["a"],VRow:Qt["a"],VSpacer:O["a"],VTab:it["a"],VTabItem:ot["a"],VTabs:nt["a"],VTextarea:Le["a"],VToolbar:Fe["a"],VToolbarItems:De["a"]});var Ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-row",{staticClass:"align-center girder-searchbar",attrs:{"no-gutters":""}},[s("v-icon",{staticClass:"mdi-24px",attrs:{color:"white"}},[t._v("$vuetify.icons.search")]),s("v-menu",{staticClass:"mx-2",attrs:{"offset-y":"","content-class":"girder-searchbar-menu",transition:"slide-y-transition","open-on-click":!1,value:t.searchText,"nudge-bottom":6},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({attrs:{light:"",solo:"","hide-details":"",clearable:""},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}},a))]}}])},[s("v-list",{attrs:{dense:""}},[t._l(t.quickResults,function(e){return s("v-list-item",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],key:e._id,on:{click:function(s){return t.$emit("select",e)}}},[s("v-list-item-action",{staticClass:"mr-2"},[s("v-icon",[t._v(t._s(t.$vuetify.icons.values[e._modelType]))])],1),s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(e.name||t.formatUsername(e)))])],1)],1)}),s("v-list-item",{directives:[{name:"show",rawName:"v-show",value:t.searchText&&0===t.quickResults.length&&!t.loading,expression:"searchText && quickResults.length === 0 && !loading"}]},[s("v-list-item-action",[s("v-icon",[t._v("$vuetify.icons.alert")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("No results found for query '"+t._s(t.searchText)+"'")]),s("v-list-item-subtitle",[t._v("Modify search parameters or refine your query.")])],1)],1),s("v-list-item",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&t.showMore&&t.searchResults.length>t.maxQuickResults,expression:"!loading && showMore && searchResults.length > maxQuickResults"}],on:{click:function(e){return t.$emit("moreresults",t.searchParams)}}},[s("v-list-item-action",[s("v-icon",[t._v("$vuetify.icons.more")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("More")])],1)],1),t._l(t.maxQuickResults+(t.showMore?1:0),function(e){return s("v-list-item",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],key:"skeleton-"+e},[s("v-list-item-action",[s("v-icon",{staticClass:"grey--text text--lighten-1"},[t._v("$vuetify.icons.circle")])],1),s("v-list-item-content",[s("v-list-item-title",{staticClass:"skeleton skeleton--text mb-2",style:{width:60+e%3*4+"%",height:"10px"}}),s("v-list-item-subtitle",{staticClass:"skeleton skeleton--text",style:{width:45-e%2*4+"%",height:"6px"}})],1)],1)})],2)],1),s("v-menu",{attrs:{"offset-y":"",left:"","content-class":"girder-search-arrow-menu","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{icon:""}},a),[s("v-icon",{staticClass:"mdi-24px"},[t._v("$vuetify.icons.settings")])],1)]}}]),model:{value:t.searchOptionsMenu,callback:function(e){t.searchOptionsMenu=e},expression:"searchOptionsMenu"}},[s("v-card",[s("v-card-actions",[s("v-col",{staticClass:"flex-column",attrs:{"no-gutters":""}},[s("v-radio-group",{staticClass:"my-2",attrs:{"hide-details":""},model:{value:t.searchMode,callback:function(e){t.searchMode=e},expression:"searchMode"}},[s("v-radio",{key:"text",staticClass:"mb-1",attrs:{label:"Text Search",value:"text"}}),s("v-radio",{key:"prefix",attrs:{label:"Prefix Search",value:"prefix"}})],1),s("v-divider"),s("v-checkbox",{staticClass:"mt-2",attrs:{"hide-details":"",label:"User",value:"user"},model:{value:t.searchTypes,callback:function(e){t.searchTypes=e},expression:"searchTypes"}}),s("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Folder",value:"folder"},model:{value:t.searchTypes,callback:function(e){t.searchTypes=e},expression:"searchTypes"}}),s("v-checkbox",{staticClass:"mt-1 mb-1",attrs:{"hide-details":"",label:"Item",value:"item"},model:{value:t.searchTypes,callback:function(e){t.searchTypes=e},expression:"searchTypes"}})],1)],1)],1)],1)],1)},Be=[],ze={props:{maxQuickResults:{type:Number,default:6},showMore:{type:Boolean,default:!1}},inject:["girderRest"],data(){return{searchText:"",searchMode:"prefix",searchTypes:["user","folder","item"],searchOptionsMenu:!1}},computed:{loading(){return this.counter.flag},quickResults(){return this.searchResults.slice(0,this.maxQuickResults)},searchParams(){return{q:this.searchText,mode:this.searchMode,types:JSON.stringify(this.searchTypes),limit:this.maxQuickResults+1}}},asyncComputed:{searchResults:{default:[],async get(){let t=[];this.counter.inc();try{if(this.searchText){const{data:e}=await this.girderRest.get("resource/search",{params:this.searchParams});t=[].concat(...this.searchTypes.map(t=>e[t]))}}catch(e){this.$emit("error",e.message||"Unknown error during search")}return this.counter.dec(),t}}},beforeCreate(){this.counter=new Ct},methods:{formatUsername(t){return`${t.firstName} ${t.lastName} (${t.login})`}}},Ae=ze,qe=(s("e589"),s("0936"),s("8860")),Ge=s("da13"),Je=s("1800"),He=s("5d23"),We=s("e449"),Qe=s("67b6"),Ke=s("43a6"),Ye=Object(f["a"])(Ae,Ne,Be,!1,null,"5822225f",null),Xe=Ye.exports;v()(Ye,{VBtn:b["a"],VCard:rt["a"],VCardActions:V["a"],VCheckbox:Bt["a"],VCol:re["a"],VDivider:S["a"],VIcon:w["a"],VList:qe["a"],VListItem:Ge["a"],VListItemAction:Je["a"],VListItemContent:He["a"],VListItemSubtitle:He["b"],VListItemTitle:He["c"],VMenu:We["a"],VRadio:Qe["a"],VRadioGroup:Ke["a"],VRow:Qt["a"],VTextField:E["a"]});var Ze=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"fill-height",attrs:{flat:""}},[s("v-row",{staticClass:"flex-column fill-height",attrs:{"no-gutters":""}},[t._t("header",[s("v-card-title",{attrs:{"primary-title":""}},[s("div",[s("div",{staticClass:"headline"},[t._v("Upload to "),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.dest.name))])]),s("div",{staticClass:"grey--text title"},[t._v(t._s(t.statusMessage))])])])]),t.uploading?s("v-progress-linear",{attrs:{value:t.totalProgressPercent,height:"20"}}):t._e(),s("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:t.files.length&&!t.errorMessage&&!t.uploading,expression:"files.length && !errorMessage && !uploading"}]},[s("v-btn",{attrs:{text:""},on:{click:function(e){t.files=[]}}},[t._v("Clear all")]),s("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.start}},[t._v(t._s(t.startButtonText))])],1),s("v-col",[t._t("dropzone",[t.files.length?t._e():s("dropzone",{attrs:{message:t.dropzoneMessage,multiple:t.multiple,accept:t.accept},on:{change:t.inputFilesChanged}})])],2),t.errorMessage?s("div",[s("v-alert",{attrs:{value:!0,dark:"",type:"error"}},[t._v(t._s(t.errorMessage)),t.uploading?t._e():s("v-btn",{attrs:{dark:"",outlined:""},on:{click:t.start}},[t._v("Resume upload")])],1)],1):t._e(),t._t("files",[s("file-upload-list",t._b({on:{input:t.setFiles}},"file-upload-list",{value:t.files,currentIndex:t.currentIndex,maxShow:t.maxShow},!1))],null,{files:t.files,setFiles:t.setFiles,currentIndex:t.currentIndex,maxShow:t.maxShow})],2)],1)},ts=[],es=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dropzone-wrapper",class:t.dropzoneClass,on:{dragenter:function(e){t.dropzoneClass="animate"},dragleave:function(e){t.dropzoneClass=null},drop:function(e){t.dropzoneClass=null}}},[s("v-row",{staticClass:"flex-column align-center justify-center fill-height dropzone-message"},[s("v-icon",{attrs:{size:"50px"}},[t._v("$vuetify.icons.fileUpload")]),s("div",{staticClass:"title mt-3"},[t._v(t._s(t.message))])],1),s("input",{staticClass:"file-input",attrs:{type:"file",multiple:t.multiple,accept:t.accept},on:{change:function(e){t.$emit("change",Array.apply(void 0,e.target.files))}}})],1)},ss=[],as={props:{message:{type:String,required:!0},multiple:{type:Boolean,required:!0},accept:{type:String,default:null}},data(){return{dropzoneClass:null}}},rs=as,is=(s("c005"),Object(f["a"])(rs,es,ss,!1,null,"12b18042",null)),os=is.exports;v()(is,{VIcon:w["a"],VRow:Qt["a"]});var ns=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-list",{directives:[{name:"show",rawName:"v-show",value:t.value.length,expression:"value.length"}],attrs:{dense:""}},[t._l(t.shownFiles,function(e,a){return s("div",{key:e.file.name,staticClass:"file-tile",class:"status-"+e.status},[a>0?s("v-divider"):t._e(),s("v-list-item",[s("v-list-item-icon",["pending"===e.status?s("v-btn",{attrs:{icon:""},on:{click:function(e){t.$emit("input",t.splice(a))}}},[s("v-icon",[t._v("$vuetify.icons.close")])],1):t._e(),"uploading"===e.status?s("v-progress-circular",{attrs:{color:"primary",rotate:-90,value:t.progressPercent(Object.assign({},e.progress,{total:e.progress.size})),indeterminate:e.progress.indeterminate}}):t._e(),"done"===e.status?s("v-icon",{attrs:{color:"success",large:""}},[t._v("$vuetify.icons.complete")]):t._e(),"error"===e.status?s("v-icon",{attrs:{color:"error",large:""}},[t._v("$vuetify.icons.error")]):t._e()],1),s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(e.file.name))]),s("v-list-item-subtitle",[e.progress.current?s("span",[t._v(t._s(t.formatSize(e.progress.current))+" /")]):t._e(),s("span",[t._v(t._s(t.formatSize(e.file.size)))])])],1),t._t("item",null,null,{file:e})],2)],1)}),t.hiddenCount?[s("v-divider"),s("v-list-item",[s("v-list-item-content",[s("div",{staticClass:"grey--text subtitle-1"},[t._v("+ "+t._s(t.hiddenCount)+" more...")])])],1)]:t._e()],2)},ls=[],cs={mixins:[gt,ft],props:{value:{type:Array,required:!0},maxShow:{type:Number,default:0},currentIndex:{type:Number,default:0}},computed:{shownFiles(){return this.maxShow?this.value.slice(this.currentIndex,this.maxShow+this.currentIndex):this.value},hiddenCount(){return this.maxShow?Math.max(this.value.length-this.maxShow-this.currentIndex,0):0}},methods:{splice(t){return[...this.value.slice(0,t),...this.value.slice(t+1)]}}},ds=cs,us=(s("b5b3"),s("34c3")),ps=s("490a"),hs=Object(f["a"])(ds,ns,ls,!1,null,"08ee7750",null),ms=hs.exports;v()(hs,{VBtn:b["a"],VDivider:S["a"],VIcon:w["a"],VList:qe["a"],VListItem:Ge["a"],VListItemContent:He["a"],VListItemIcon:us["a"],VListItemSubtitle:He["b"],VListItemTitle:He["c"],VProgressCircular:ps["a"]});var fs={components:{Dropzone:os,FileUploadList:ms},mixins:[gt,ft],inject:["girderRest"],props:{dest:{required:!0,type:Object},maxShow:{default:0,type:Number},multiple:{default:!0,type:Boolean},preUpload:{default:()=>{},type:Function},postUpload:{default:()=>{},type:Function},uploadCls:{default:kt,type:Function},accept:{default:null,type:String},startButtonText:{default:"Start Upload",type:String}},data:()=>({dragover:!1,errorMessage:null,files:[],uploading:!1,currentIndex:0}),computed:{dropzoneMessage(){return this.multiple?"Drag files here or click to select them":"Drag a file here or click to select one"},statusMessage(){return this.uploading?`${this.formatSize(this.totalProgress)} / ${this.formatSize(this.totalSize)} `+`(${this.totalProgressPercent}%)`:`${this.files.length} selected (${this.formatSize(this.totalSize)} total)`},totalProgress(){return this.files.reduce((t,e)=>t+e.progress.current,0)},totalSize(){return this.files.reduce((t,e)=>t+e.file.size,0)},totalProgressPercent(){return this.progressPercent({current:this.totalProgress,total:this.totalSize})}},methods:{inputFilesChanged(t){this.currentIndex=0,this.files=t.map(t=>({file:t,status:"pending",progress:{indeterminate:!1,current:0,size:t.size},upload:null,result:null}))},setFiles(t){this.currentIndex>=t.length&&(this.currentIndex=t.length-1),this.files=t},async start(){const t=[];for(this.uploading=!0,this.errorMessage=null,await this.preUpload();this.currentIndex<this.files.length;this.currentIndex+=1){const s=this.files[this.currentIndex];if("done"===s.status)t.push(s.result);else{const a=t=>{Object.assign(s.progress,t)};s.status="uploading",s.progress.indeterminate=!0;try{s.upload?s.result=await s.upload.resume():(s.upload=new this.uploadCls(s.file,{$rest:this.girderRest,parent:this.dest,progress:a}),await s.upload.beforeUpload(),s.result=await s.upload.start()),await s.upload.afterUpload(),delete s.upload,t.push(s.result),s.status="done",s.progress.current=s.file.size}catch(e){return await s.upload.onError(e),e.response?this.errorMessage=e.response.data.message||"An error occurred during upload.":this.errorMessage="Connection failed.",s.status="error",this.uploading=!1,void this.$emit("error",{error:e,file:s})}}}await this.postUpload(),this.uploading=!1,this.files=[],this.$emit("done",t)}}},gs=fs,vs=Object(f["a"])(gs,Ze,ts,!1,null,null,null),bs=vs.exports;v()(vs,{VAlert:j["a"],VBtn:b["a"],VCard:rt["a"],VCardActions:V["a"],VCardTitle:V["c"],VCol:re["a"],VProgressLinear:ge["a"],VRow:Qt["a"]});var ys=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{on:{submit:function(e){return e.preventDefault(),t.upsert(e)}}},[s("v-card",{attrs:{flat:""}},[s("v-row",{staticClass:"pa-2 flex-column",attrs:{"no-gutters":""}},[t._t("header",[s("v-card-title",{staticClass:"pb-0",attrs:{"primary-title":""}},[s("h5",{staticClass:"display-1 secondary--text text--darken-1"}),t._v(t._s(t.edit?"Edit Folder":"Create New Folder"))])]),s("v-card-text",[s("v-text-field",{ref:"folderName",attrs:{autofocus:"",label:"Folder Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("girder-breadcrumb",t._b({staticClass:"mb-3",attrs:{readonly:""}},"girder-breadcrumb",{location:t.location,append:t.append},!1)),s("girder-markdown-editor",{attrs:{label:"Description (Optional)"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),s("v-alert",{attrs:{type:"error",value:!!t.error,dismissible:"",transition:"scale-transition"}},[t._v(t._s(t.error))])],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:function(e){return t.$emit("dismiss")}}},[t._v("Cancel")]),s("v-btn",{attrs:{depressed:"",color:"primary",type:"submit",disabled:!t.name}},[t._v(t._s(t.edit?"Save Changes":"Create Folder"))])],1)],2)],1)],1)},ws=[];const _s="folder";var xs={components:{GirderBreadcrumb:It,GirderMarkdownEditor:Me},props:{location:{type:Object,required:!0,validator:jt(!1)},edit:{type:Boolean,default:!1},preUpsert:{type:Function,default:()=>{}},postUpsert:{type:Function,default:()=>{}}},inject:["girderRest"],data(){return{name:"",description:"",error:""}},computed:{append(){return this.edit?[]:[this.name||"New Folder"]}},mounted(){this.edit&&this.loadFolder(this.location._id)},methods:{async upsert(){this.error="";try{await this.preUpsert(),this.edit?await this.girderRest.put(`${_s}/${this.location._id}`,Object(J["stringify"])({name:this.name,description:this.description})):await this.girderRest.post(_s,Object(J["stringify"])({parentType:this.location._modelType,parentId:this.location._id,name:this.name,description:this.description,reuseExisting:!1})),await this.postUpsert(),this.name="",this.description="",this.$emit("done")}catch(t){this.$emit("error",{type:"upsert",error:t}),this.setError(t)}},async loadFolder(t){this.error="";try{const{data:s}=await this.girderRest.get(`${_s}/${t}`);this.name=s.name,this.description=s.description}catch(e){this.$emit("error",{type:"load",error:e}),this.setError(e)}},setError(t){if(t.response){const{data:e={}}=t.response,{type:s="unknown",message:a,field:r="unknown"}=e;this.error=`${s} error on ${r}: ${a||t.message}`}else this.error=`Unknown error: ${t.message}`}}},ks=xs,Cs=Object(f["a"])(ks,ys,ws,!1,null,null,null),$s=Cs.exports;function Rs(t){t.use(i["a"]),t.use(r["a"])}v()(Cs,{VAlert:j["a"],VBtn:b["a"],VCard:rt["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VForm:P["a"],VRow:Qt["a"],VSpacer:O["a"],VTextField:E["a"]});const Ts=new i["a"]({...bt});var js={install:Rs};class Vs extends a["a"]{constructor(t,{EventSource:e=window.EventSource,listenToRestClient:s=!0,pollingInterval:a=[500,5e3,1e3],since:r=new Date,useEventSource:i=!1,withCredentials:o=!0}={}){super(),Object.assign(this,{$rest:t,EventSource:e,pollingInterval:a,since:r,useEventSource:i,withCredentials:o}),s&&(t.$on("login",()=>{this.connect()}),t.$on("logout",()=>{this.disconnect()}))}_emitNotification(t){const{type:e,updated:s}=t;s&&(this.since=new Date(Math.max(+this.since,+new Date(s))));for(let a=e.indexOf(".");-1!==a;a=e.indexOf(".",a+1))this.$emit(`message:${e.substring(0,a)}`,t,this);this.$emit(`message:${e}`,t,this),this.$emit("message",t,this)}_onSseMessage({data:t}){this._emitNotification(JSON.parse(t))}_onSseError(t){this.$emit("error",t,this),this.disconnect(),this.useEventSource=!1,this.connect()}get connected(){return!(!this._eventSource&&!this._poller)}connect(){if(!this.connected)if(this.useEventSource&&this.EventSource){const t=Math.ceil(+this.since/1e3),e=`${this.$rest.apiRoot}/notification/stream?since=${t}`;this._eventSource=new this.EventSource(e,{withCredentials:this.withCredentials}),this._eventSource.onmessage=this._onSseMessage.bind(this),this._eventSource.onerror=this._onSseError.bind(this),this.$emit("start",this)}else this._poll()}disconnect(){this._stopPolling(),this._eventSource&&(this._eventSource.close(),this._eventSource=null,this.$emit("stop",this))}_poll(t=0){const[e,s,a]=this.pollingInterval;let r;this._poller=setTimeout(async()=>{try{const{data:o}=await this.$rest.get(`/notification?since=${this.since.toISOString()}`);o.forEach(this._emitNotification.bind(this)),r=o.length?e:0===t?s:Math.min(t+a,s)}catch(i){r=s}finally{this._poll(r)}},t)}_stopPolling(){clearTimeout(this._poller),this._poller=null}}var Ss=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{staticClass:"app"},[s("v-content",[s("v-toolbar",{staticClass:"toolbar-main",attrs:{color:"primary",dark:""}},[s("v-toolbar-title",[t._v("Girder Web Components")]),s("v-toolbar-items",[s("v-menu",{attrs:{"offset-y":"",left:"","close-on-content-click":!1,"content-class":"girder-search-arrow-menu"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{icon:""}},a),[s("v-icon",{staticClass:"mdi-24px"},[t._v("$vuetify.icons.more")])],1)]}}]),model:{value:t.uiOptionsMenu,callback:function(e){t.uiOptionsMenu=e},expression:"uiOptionsMenu"}},[s("v-card",[s("v-card-actions",[s("v-row",[s("v-col",{staticClass:"py-0"},[s("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Worker Jobs"},model:{value:t.jobsEnabled,callback:function(e){t.jobsEnabled=e},expression:"jobsEnabled"}}),s("v-divider",{staticClass:"mt-2 mb-1"}),s("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Data Browser"},model:{value:t.browserEnabled,callback:function(e){t.browserEnabled=e},expression:"browserEnabled"}}),s("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Select"},model:{value:t.selectable,callback:function(e){t.selectable=e},expression:"selectable"}}),s("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Draggable"},model:{value:t.dragEnabled,callback:function(e){t.dragEnabled=e},expression:"dragEnabled"}}),s("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"New Folder"},model:{value:t.newFolderEnabled,callback:function(e){t.newFolderEnabled=e},expression:"newFolderEnabled"}}),s("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Upload"},model:{value:t.uploadEnabled,callback:function(e){t.uploadEnabled=e},expression:"uploadEnabled"}}),s("v-checkbox",{staticClass:"mt-1",attrs:{"hide-details":"",label:"Root Disabled"},model:{value:t.rootLocationDisabled,callback:function(e){t.rootLocationDisabled=e},expression:"rootLocationDisabled"}}),s("v-divider",{staticClass:"mt-2 mb-1"}),s("v-checkbox",{staticClass:"mt-1 mb-1",attrs:{"hide-details":"",label:"Search Box"},model:{value:t.searchEnabled,callback:function(e){t.searchEnabled=e},expression:"searchEnabled"}})],1)],1)],1)],1)],1)],1),s("v-spacer"),t.searchEnabled?s("girder-search",{on:{select:t.handleSearchSelect}}):t._e(),t.loggedOut?t._e():s("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){return t.girderRest.logout()}}},[s("v-icon",[t._v("$vuetify.icons.logout")])],1)],1),s("v-container",[s("v-row",[t.loggedOut?s("v-col",{attrs:{lg:"4",md:"5",sm:"12"}},[s("girder-auth",{key:t.girderRest.token,attrs:{"force-otp":!1,register:!0,oauth:!0,"forgot-password-url":t.forgotPasswordUrl}})],1):t._e(),s("v-col",[t.browserEnabled?s("girder-file-manager",{staticClass:"mb-3",attrs:{"drag-enabled":t.dragEnabled,"new-folder-enabled":t.newFolderEnabled,selectable:t.selectable,location:t.location,"root-location-disabled":t.rootLocationDisabled,"upload-multiple":t.uploadMultiple,"upload-enabled":t.uploadEnabled},on:{"update:location":function(e){t.location=e},"selection-changed":function(e){t.selected=e}}}):t._e(),t.jobsEnabled?s("girder-job-list"):t._e()],1)],1)],1)],1)],1)},Ps=[],Os=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"girder-data-browser-snippet"},[s("v-row",[s("v-col",[s("v-card",[s("girder-data-browser",{ref:"girderBrowser",attrs:{location:t.internalLocation,selectable:t.selectable,draggable:t.dragEnabled,"root-location-disabled":t.rootLocationDisabled},on:{"update:location":function(e){t.internalLocation=e},"selection-changed":function(e){return t.$emit("selection-changed",e)},rowclick:function(e){return t.$emit("rowclick",e)},drag:function(e){return t.$emit("drag",e)},dragstart:function(e){return t.$emit("dragstart",e)},dragend:function(e){return t.$emit("dragend",e)},drop:function(e){return t.$emit("drop",e)}},scopedSlots:t._u([{key:"breadcrumb",fn:function(t){return[s("girder-breadcrumb",{attrs:{location:t.location,"root-location-disabled":t.rootLocationDisabled},on:{crumbclick:function(e){return t.changeLocation(e)}}})]}},{key:"headerwidget",fn:function(){return[t._t("headerwidget"),t.shouldShowUpload?s("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({staticClass:"ma-0",attrs:{text:"",small:"",color:"secondary darken-2"}},a),[s("v-icon",{staticClass:"mdi-24px mr-1",attrs:{left:"",color:"accent"}},[t._v("$vuetify.icons.fileNew")]),s("span",{staticClass:"hidden-xs-only"},[t._v("Upload")])],1)]}}],null,!1,2811651506),model:{value:t.uploaderDialog,callback:function(e){t.uploaderDialog=e},expression:"uploaderDialog"}},[s("girder-upload",{attrs:{dest:t.uploadDest,"pre-upload":t.preUpload,"post-upload":t.postUploadInternal,multiple:t.uploadMultiple,"max-show":t.uploadMaxShow,accept:t.uploadAccept}})],1):t._e(),t.newFolderEnabled&&!t.isRootLocation(t.internalLocation)&&t.girderRest.user?s("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({staticClass:"ma-0",attrs:{text:"",small:"",color:"secondary darken-2"}},a),[s("v-icon",{staticClass:"mdi-24px mr-1",attrs:{left:"",color:"accent"}},[t._v("$vuetify.icons.folderNew")]),s("span",{staticClass:"hidden-xs-only"},[t._v("New Folder")])],1)]}}],null,!1,2486663819),model:{value:t.newFolderDialog,callback:function(e){t.newFolderDialog=e},expression:"newFolderDialog"}},[s("girder-upsert-folder",{key:t.internalLocation._id,attrs:{location:t.internalLocation,"pre-upsert":t.preUpsert,"post-upsert":t.postUpsertInternal},on:{dismiss:function(e){t.newFolderDialog=!1}}})],1):t._e()]},proxy:!0}],null,!0)})],1)],1)],1)],1)},Es=[],Is=s("5118"),Ls={components:{GirderBreadcrumb:It,GirderUpload:bs,GirderUpsertFolder:$s,GirderDataBrowser:Yt},props:{location:{type:Object,validator:jt(!0),default:null},rootLocationDisabled:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},dragEnabled:{type:Boolean,default:!1},uploadEnabled:{type:Boolean,default:!1},newFolderEnabled:{type:Boolean,default:!1},uploadMaxShow:{type:Number,default:0},uploadMultiple:{type:Boolean,default:!1},uploadAccept:{type:String,default:"*"},preUpload:{type:Function,default:async()=>{}},postUpload:{type:Function,default:async()=>{}},preUpsert:{type:Function,default:async()=>{}},postUpsert:{type:Function,default:async()=>{}}},inject:["girderRest"],data(){return{uploaderDialog:!1,newFolderDialog:!1,lazyLocation:null}},computed:{internalLocation:{get(){const{location:t,lazyLocation:e}=this;return t||(e||{type:"root"})},set(t){this.lazyLocation=t,this.$emit("update:location",t)}},uploadDest(){const{internalLocation:t}=this;return t&&"folder"===$t(t)?t:null},shouldShowUpload(){return this.uploadEnabled&&!Rt(this.internalLocation)&&this.girderRest.user&&this.uploadDest}},created(){if(!jt(!this.rootLocationDisabled)(this.internalLocation))throw new Error("root location cannot be used when root-location-disabled is true")},methods:{isRootLocation:Rt,postUploadInternal(){return this.$refs.girderBrowser.refresh(),this.uploaderDialog=!1,Promise.all([new Promise(t=>Object(Is["setTimeout"])(t,400)),this.postUpload()])},postUpsertInternal(){return this.$refs.girderBrowser.refresh(),this.newFolderDialog=!1,Promise.all([new Promise(t=>Object(Is["setTimeout"])(t,400)),this.postUpsert()])}}},Fs=Ls,Ds=s("169a"),Us=Object(f["a"])(Fs,Os,Es,!1,null,null,null),Ms=Us.exports;v()(Us,{VBtn:b["a"],VCard:rt["a"],VCol:re["a"],VDialog:Ds["a"],VIcon:w["a"],VRow:Qt["a"]});var Ns={name:"App",inject:["girderRest"],components:{GirderAuth:pt,GirderFileManager:Ms,GirderSearch:Xe,GirderJobList:xe},data(){return{browserEnabled:!0,dragEnabled:!1,forgotPasswordUrl:"/#?dialog=resetpassword",jobsEnabled:!1,internalLocation:null,rootLocationDisabled:!1,searchEnabled:!0,selected:[],selectable:!0,uiOptionsMenu:!1,uploadEnabled:!0,uploadMultiple:!0,newFolderEnabled:!0}},computed:{loggedOut(){return null===this.girderRest.user},location:{get(){return this.internalLocation||(this.loggedOut?{type:"collections"}:this.girderRest.user)},set(t){this.internalLocation=t}}},methods:{handleSearchSelect(t){["user","folder"].indexOf(t._modelType)>=0?this.location=t:this.location={_modelType:"folder",_id:t.folderId}}}},Bs=Ns,zs=(s("dfa1"),s("7496")),As=s("a75b"),qs=Object(f["a"])(Bs,Ss,Ps,!1,null,null,null),Gs=qs.exports;v()(qs,{VApp:zs["a"],VBtn:b["a"],VCard:rt["a"],VCardActions:V["a"],VCheckbox:Bt["a"],VCol:re["a"],VContainer:y["a"],VContent:As["a"],VDivider:S["a"],VIcon:w["a"],VMenu:We["a"],VRow:Qt["a"],VSpacer:O["a"],VToolbar:Fe["a"],VToolbarItems:De["a"],VToolbarTitle:De["b"]}),a["a"].use(js);const Js=new et({apiRoot:"https://data.kitware.com/api/v1"}),Hs=new Vs(Js);Hs.connect(),Js.fetchUser().then(()=>{new a["a"]({vuetify:Ts,render:t=>t(Gs),provide:{girderRest:Js,notificationBus:Hs}}).$mount("#app")})},ada0:function(t,e,s){},addb:function(t,e,s){"use strict";var a=s("11a7"),r=s.n(a);r.a},b5b3:function(t,e,s){"use strict";var a=s("c4c2"),r=s.n(a);r.a},c005:function(t,e,s){"use strict";var a=s("ada0"),r=s.n(a);r.a},c4c2:function(t,e,s){},c898:function(t,e,s){},dfa1:function(t,e,s){"use strict";var a=s("98e3"),r=s.n(a);r.a},e589:function(t,e,s){"use strict";var a=s("406f"),r=s.n(a);r.a}});
//# sourceMappingURL=app.9b4ca8b0.js.map