(function(e){function t(t){for(var a,o,n=t[0],l=t[1],c=t[2],u=0,p=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,n=1;n<s.length;n++){var l=s[n];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=l;i.push(["a1ec","chunk-vendors"]),s()})({"01f6":function(e,t,s){},"01f8":function(e,t,s){},"0e3a":function(e,t,s){"use strict";var a=s("8991"),r=s.n(a);r.a},"12b3":function(e,t,s){"use strict";var a=s("8944"),r=s.n(a);r.a},"23cb":function(e,t,s){"use strict";var a=s("8ff5"),r=s.n(a);r.a},"28e0":function(e,t,s){"use strict";var a=s("84c2"),r=s.n(a);r.a},"406f":function(e,t,s){},4551:function(e,t,s){},5127:function(e,t,s){"use strict";var a=s("af69"),r=s.n(a);r.a},"575a":function(e,t,s){},"5aa8":function(e,t,s){"use strict";var a=s("01f6"),r=s.n(a);r.a},"708d":function(e,t,s){"use strict";var a=s("f94b"),r=s.n(a);r.a},"77d4":function(e,t,s){"use strict";var a=s("4551"),r=s.n(a);r.a},"84c2":function(e,t,s){},8944:function(e,t,s){},8991:function(e,t,s){},"8d4c":function(e,t,s){"use strict";var a=s("a033"),r=s.n(a);r.a},"8ff5":function(e,t,s){},"97f4":function(e,t,s){},"9ff0":function(e,t,s){"use strict";var a=s("e136"),r=s.n(a);r.a},a033:function(e,t,s){},a1ec:function(e,t,s){"use strict";s.r(t);var a=s("a026"),r=s("3003"),i=s("f309"),o=(s("41e6"),s("bf40"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"px-3 py-2 access-control"},[s("v-card-title",[s("div",[s("div",{staticClass:"title"},[e._v("Access control")]),s("breadcrumb",{attrs:{location:e.model,readonly:"","no-root":""}})],1)]),s("v-card-text",{staticClass:"pt-0"},[s("v-switch",{staticClass:"mb-4",attrs:{label:"Public",hint:e.public?"Anyone can view this folder":"Access is required to view this folder","persistent-hint":""},model:{value:e.public,callback:function(t){e.public=t},expression:"public"}}),s("v-subheader",[e._v("Users / Groups")]),s("transition",{attrs:{name:"height",mode:"out-in"}},[e.groupsAndUsers.length?s("v-list",{staticClass:"group-user",attrs:{"two-line":""}},[s("transition-group",{attrs:{name:"height2"}},e._l(e.groupsAndUsers,function(t){return s("v-list-item",{key:t.id},[s("v-list-item-action",{staticClass:"mr-5"},[s("v-icon",[e._v(e._s(e.$vuetify.icons.values[t.login?"user":"group"]))])],1),s("v-list-item-content",[s("v-list-item-title",[e._v(e._s(t.name))]),s("v-list-item-subtitle",[e._v(e._s(t.login||t.description))])],1),s("v-list-item-action",{staticClass:"mr-5"},[s("v-select",{staticClass:"level",attrs:{items:e.permissions,light:"",solo:"","hide-details":"",dense:""},model:{value:t.level,callback:function(s){e.$set(t,"level",s)},expression:"model.level"}})],1),s("v-list-item-action",{staticClass:"mr-5"},[s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.remove(t)}}},[s("v-icon",[e._v("mdi-minus-circle")])],1)],1)],1)}),1)],1):e._e(),e.groupsAndUsers.length||e.loading?e._e():s("div",{staticClass:"mt-1 mb-2"},[e._v("Empty")])],1),s("v-subheader",[e._v("Grant access")]),s("search",{staticClass:"search mb-3",attrs:{"hide-search-icon":"","search-type-options":[{name:"User",value:"user"},{name:"Group",value:"group"}],"search-types":["user","group"],placeholder:"User or group name"},on:{select:e.groupOrUserSelected}}),s("v-switch",{staticClass:"mt-0",attrs:{label:"Include subfolders",hint:e.recursive?"Also set this permissions on all subfolders":"Apply permissions only to this folder","persistent-hint":""},model:{value:e.recursive,callback:function(t){e.recursive=t},expression:"recursive"}})],1),e._t("card-actions",[s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("close")}}},[e._v("Cancel")]),s("v-btn",{attrs:{color:"primary",depressed:""},on:{click:e.save}},[e._v("Save")])],1)],null,{save:e.save,loading:e.loading})],2)}),n=[],l=s("4328"),c=s("c1df"),d=s.n(c);const u={INACTIVE:{value:0,text:"Inactive",icon:"mdi-pause",color:"grey lighten-1"},QUEUED:{value:1,text:"Queued",icon:"mdi-dots-horizontal",color:"yellow darken-2",indeterminate:!0},RUNNING:{value:2,text:"Running",icon:"mdi-autorenew",color:"light-blue",class:["mdi-spin"]},SUCCESS:{value:3,text:"Success",icon:"mdi-check-circle",color:"green"},ERROR:{value:4,text:"Error",icon:"mdi-alert-circle",color:"red"},CANCELED:{value:5,text:"Canceled",icon:"mdi-close-circle",color:"grey darken-1"},WORKER_FETCHING_INPUT:{value:820,text:"Fetching input",icon:"mdi-cloud-download",color:"light-blue lighten-2",indeterminate:!0},WORKER_CONVERTING_INPUT:{value:821,text:"Converting input",icon:"mdi-shuffle",color:"lime",indeterminate:!0},WORKER_CONVERTING_OUTPUT:{value:822,text:"Converting output",icon:"mdi-shuffle",color:"lime",indeterminate:!0},WORKER_PUSHING_OUTPUT:{value:823,text:"Pushing output",icon:"mdi-cloud-upload",color:"light-blue lighten-2",indeterminate:!0},WORKER_CANCELING:{value:824,text:"Canceling",icon:"mdi-alert",color:"grey darken-1",indeterminate:!0}};function p(e){return Object.values(u).find(t=>t.value===e)}var h=s("bc3a"),m=s.n(h);class f{constructor(e){Object.assign(this,e,{etags:{},offset:0,partNumber:1})}_finalizeMultipartXml(){const e=document.implementation.createDocument(null,null,null),t=e.createElement("CompleteMultipartUpload");return Object.entries(this.etags).forEach(([s,a])=>{const r=e.createElement("Part"),i=e.createElement("PartNumber"),o=e.createElement("ETag");i.appendChild(e.createTextNode(s)),o.appendChild(e.createTextNode(a)),r.appendChild(i),r.appendChild(o),t.appendChild(r)}),t.outerHTML}async _multiChunkUpload(){const{headers:e,method:t,url:s}=this.upload.s3.request,a=await m.a.request({data:null,headers:e,method:t,url:s}),r=(new DOMParser).parseFromString(a.data,"text/xml");return this.upload.s3.uploadId=r.querySelector("InitiateMultipartUploadResult > UploadId").textContent,this._sendChunks()}async _sendChunks(){const e=e=>this.progress({current:this.offset+e.loaded,total:this.file.size,indeterminate:!e.lengthComputable});while(this.offset<this.file.size){const t=this.file.slice(this.offset,this.offset+this.upload.s3.chunkLength),{method:s,url:a}=(await this.$rest.post("file/chunk",Object(l["stringify"])({chunk:JSON.stringify({contentLength:t.size,partNumber:this.partNumber,s3UploadId:this.upload.s3.uploadId}),offset:0,uploadId:this.upload._id}))).data.s3.request,r=await m.a.request({data:t,method:s,url:a,onUploadProgress:e});this.etags[this.partNumber]=r.headers.etag,this.partNumber+=1,this.offset+=t.size}this.progress({indeterminate:!0});const t=await this.$rest.post("file/completion",Object(l["stringify"])({uploadId:this.upload._id})),{headers:s,method:a,url:r}=t.data.s3FinalizeRequest;return await m.a.request({data:this._finalizeMultipartXml(),headers:s,method:a,url:r}),t.data}async start(){if(this.upload.s3.chunked)return this._multiChunkUpload();const{headers:e,method:t,url:s}=this.upload.s3.request;return await m.a.request({data:this.file,headers:e,method:t,url:s,onUploadProgress:e=>this.progress({current:e.loaded,total:this.file.size,indeterminate:!e.lengthComputable})}),this.progress({indeterminate:!0}),(await this.$rest.post("file/completion",Object(l["stringify"])({uploadId:this.upload._id}))).data}async resume(){return this.upload.s3.chunked?this._sendChunks():(this.upload.s3.request=(await this.$rest.get(`file/offset?uploadId=${this.upload._id}`)).data,this.start())}}class g{constructor(e,{$rest:t,parent:s,progress:a=(()=>null)}={}){Object.assign(this,{$rest:t,file:e,parent:s,progress:a})}async start(){throw new Error("not implemented")}async resume(){return this.start()}beforeUpload(){}afterUpload(){}onError(e){}}const v=67108864,b={s3:f};class y extends g{constructor(e,{$rest:t,parent:s,progress:a=(()=>null),params:r={},chunkLen:i=v}={}){super(e,{$rest:t,parent:s,progress:a}),Object.assign(this,{params:r,chunkLen:i,upload:null,offset:0,behavior:null})}async _sendChunks(){const e=e=>this.progress({indeterminate:!e.lengthComputable,current:this.offset+e.loaded,size:this.file.size});while(this.offset<this.file.size){const t=Math.min(this.offset+this.chunkLen,this.file.size),s=this.file.slice(this.offset,t),a=`file/chunk?offset=${this.offset}&uploadId=${this.upload._id}`;this.upload=(await this.$rest.post(a,s,{onUploadProgress:e,headers:{"Content-Type":"application/octet-stream"}})).data,this.offset=t}return this.upload}async start(){return this.upload=(await this.$rest.post("/file",Object(l["stringify"])({parentType:this.parent._modelType,parentId:this.parent._id,name:this.file.name,size:this.file.size,mimeType:this.file.type,...this.params}))).data,this.upload.behavior&&b[this.upload.behavior]?(this.behavior=new b[this.upload.behavior](this),this.behavior.start()):this._sendChunks()}async resume(){return this.upload?(this.progress({indeterminate:!0}),this.behavior?this.behavior.resume():(this.offset=(await this.$rest.get(`file/offset?uploadId=${this.upload._id}`)).data.offset,this._sendChunks())):this.start()}}const w={methods:{formatDate(e){const t=new Date(e);return t.toLocaleString()}}},_={methods:{formatSize(e,{base:t=1024,unit:s="B"}={}){if(e<t)return`${e} ${s}`;let a,r=e;for(a=0;r>=t&&a<4;a+=1)r/=t;return`${r.toFixed(2)}  ${["","K","M","G","T"][a]}${s}`}}},x={methods:{progressPercent(e){return e.total?Math.round(100*(e.current||0)/e.total):0}}},k={methods:{formatUsername(e){return`${e.firstName} ${e.lastName} (${e.login})`}}},C={methods:{progressAsNumber(e){return e?e.current/e.total*100:100},formatJob(e){const t=Object.assign({text:"Unknown"},p(e.status));return{statusText:t.text,statusColor:t.color,statusTextColor:t.textColor||"white",statusIcon:t.icon,updateString:d()(e.updated).format("dddd, MMMM D, YYYY @ h:mm a"),progressNumber:this.progressAsNumber(e.progress),indeterminate:t.indeterminate,class:t.class,...e}}}},$={inject:["girderRest"],data(){return{errorMessage:null,files:[],uploading:!1,currentIndex:0}},watch:{files(e){this.$emit("filesChanged",e)}},computed:{totalProgress(){return this.files.reduce((e,t)=>e+t.progress.current,0)},totalSize(){return this.files.reduce((e,t)=>e+t.file.size,0)},totalProgressPercent(){return this.progressPercent({current:this.totalProgress,total:this.totalSize})}},methods:{inputFilesChanged(e){this.currentIndex=0,this.files=e.map(e=>({file:e,status:"pending",progress:{indeterminate:!1,current:0,size:e.size},upload:null,result:null}))},setFiles(e){this.currentIndex>=e.length&&(this.currentIndex=e.length-1),this.files=e},async start({dest:e,preUpload:t=(async()=>{}),postUpload:s=(async()=>{}),uploadCls:a=y}){const r=[];for(this.uploading=!0,this.errorMessage=null,await t();this.currentIndex<this.files.length;this.currentIndex+=1){const t=this.files[this.currentIndex];if("done"===t.status)r.push(t.result);else{const s=e=>{Object.assign(t.progress,e)};t.status="uploading",t.progress.indeterminate=!0;try{t.upload?t.result=await t.upload.resume():(t.upload=new a(t.file,{$rest:this.girderRest,parent:e,progress:s}),await t.upload.beforeUpload(),t.result=await t.upload.start()),await t.upload.afterUpload(),delete t.upload,r.push(t.result),t.status="done",t.progress.current=t.file.size}catch(i){return await t.upload.onError(i),i.response?this.errorMessage=i.response.data.message||"An error occurred during upload.":this.errorMessage="Connection failed.",t.status="error",this.uploading=!1,void this.$emit("error",{error:i,file:t})}}}await s({results:r}),this.uploading=!1,this.files=[],this.$emit("done",r)}}};var S=s("fcf4"),T={theme:{dark:!1,options:{customProperties:!0},themes:{light:{primary:S["a"].lightBlue.darken1,secondary:S["a"].blueGrey.base,accent:S["a"].lightBlue.darken1,error:S["a"].red.base,info:S["a"].lightBlue.lighten1,dropzone:S["a"].grey.lighten3},dark:{primary:S["a"].lightBlue.darken3,secondary:S["a"].grey.base,accent:S["a"].lightBlue.lighten1,dropzone:S["a"].grey.darken2}}},icons:{iconfont:"mdi",values:{alert:"mdi-alert-circle",bitbucket:"mdi-bitbucket",box_com:"mdi-package",chevron:"mdi-chevron-right",circle:"mdi-checkbox-blank-circle",collection:"mdi-file-tree",download:"mdi-download",edit:"mdi-pencil",externalLink:"mdi-open-in-new",file:"mdi-file",fileMultiple:"mdi-file-multiple",fileNew:"mdi-file-plus",fileUpload:"mdi-file-upload",folder:"mdi-folder",folderNonPublic:"mdi-folder-key",folderNew:"mdi-folder-plus",github:"mdi-github-circle",globe:"mdi-earth",globus:"mdi-earth",google:"mdi-google",group:"mdi-account-multiple",item:"mdi-file",linkedin:"mdi-linkedin",lock:"mdi-lock",login:"mdi-login",logout:"mdi-logout",more:"mdi-dots-horizontal",otp:"mdi-shield-key",preview:"mdi-file-find",search:"mdi-magnify",settings:"mdi-tune",user:"mdi-account",userHome:"mdi-home-account",view:"mdi-eye"}}};class V extends a["a"]{constructor(e=200){super({data(){return{flag:!1}}}),this.count=0,this.delay=e,this.timeout=null}inc(){this.count+=1,this.count>0&&this._toggleFlag(!0)}dec(){this.count=Math.max(0,this.count-1),0===this.count&&this._toggleFlag(!1)}_toggleFlag(e){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.flag=e},this.delay)}}function R(e){return e._modelType||e.type}function P(e){const t=R(e);return["collections","users","root"].indexOf(t)>=0}function j(e){const t=R(e);switch(t){case"collections":return"collection";case"users":return"user";default:return""}}function O(e){return t=>{return!!t&&(P(t)?e:!!t._id)}}var I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"girder-breadcrumb-component"},[e.girderRest.user&&!e.readonly?s("v-icon",{staticClass:"home-button mr-3",attrs:{color:"accent",disabled:e.location._id===e.girderRest.user._id},on:{click:function(t){return e.$emit("crumbclick",e.girderRest.user)}}},[e._v("$vuetify.icons.userHome")]):e._e(),s("v-breadcrumbs",{staticClass:"font-weight-bold pa-0",attrs:{items:e.breadcrumb},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[s("v-breadcrumbs-item",{attrs:{tag:"a",disabled:e.readonly||e.breadcrumb.indexOf(a)==e.breadcrumb.length-1},on:{click:function(t){return e.$emit("crumbclick",a)}}},[-1!==["folder","user","collection"].indexOf(a.type)?[s("span",{staticClass:"accent--text"},[e._v(e._s(a.name))])]:"users"===a.type?[s("v-icon",{staticClass:"mdi-18px accent--text"},[e._v("$vuetify.icons.user")])]:"collections"===a.type?[s("v-icon",{staticClass:"mdi-18px accent--text"},[e._v("$vuetify.icons.collection")])]:"root"===a.type?[s("v-icon",{staticClass:"mdi-18px accent--text"},[e._v("$vuetify.icons.globe")])]:s("span",[e._v(e._s(a))])],2)]}}])},[s("span",{staticClass:"subheading font-weight-bold",attrs:{slot:"divider",disabled:e.readonly},slot:"divider"},[e._v("/")])])],1)},L=[],F={props:{location:{type:Object,required:!0,validator:O(!0)},readonly:{type:Boolean,default:!1},append:{type:Array,default:()=>[]},rootLocationDisabled:{type:Boolean,default:!1}},inject:["girderRest"],data(){return{loading:!1}},computed:{breadcrumb(){const{append:e}=this;return[...this.pathBreadcrumb,...e]}},asyncComputed:{pathBreadcrumb:{default:[],async get(){this.loading=!0;const e=[],{rootLocationDisabled:t,girderRest:s,location:a}=this,{user:r}=s,i=R(a),{name:o,_id:n}=a;if("folder"===i){if(o)e.unshift(this.extractCrumbData(a));else{const{data:t}=await this.girderRest.get(`folder/${n}`);e.unshift(this.extractCrumbData(t))}const{data:t}=await this.girderRest.get(`folder/${n}/rootpath`);t.reverse().forEach(t=>{e.unshift(this.extractCrumbData(t.object))})}else if("user"===i||"collection"===i){const{data:t}=await this.girderRest.get(`${i}/${n}`);e.unshift(this.extractCrumbData(t))}return t||(("users"===i||r&&e.length&&"user"===e[0].type)&&e.unshift({type:"users"}),("collections"===i||e.length&&"collection"===e[0].type)&&e.unshift({type:"collections"}),e.unshift({type:"root"})),this.loading=!1,e}}},created(){if(!O(!this.rootLocationDisabled)(this.location))throw new Error("root location cannot be used when root-location-disabled is true")},methods:{extractCrumbData(e){return{...e,type:e.type?e.type:e._modelType,name:"user"!==e._modelType?e.name:e.login}}}},D=F,E=(s("28e0"),s("2877")),U=s("6544"),M=s.n(U),A=s("2bc5"),N=s("f625"),z=s("132d"),B=Object(E["a"])(D,I,L,!1,null,null,null),q=B.exports;M()(B,{VBreadcrumbs:A["a"],VBreadcrumbsItem:N["a"],VIcon:z["a"]});var G=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-row",{staticClass:"align-center girder-searchbar",attrs:{"no-gutters":""}},[e.hideSearchIcon?e._e():s("v-icon",{staticClass:"mr-3 mdi-24px",attrs:{color:"white"}},[e._v("$vuetify.icons.search")]),s("v-menu",{attrs:{"offset-y":"","content-class":"girder-searchbar-menu",transition:"slide-y-transition","open-on-click":!1,value:e.searchText,"nudge-bottom":6},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-text-field",e._g({attrs:{light:"",solo:"","hide-details":"",clearable:"",placeholder:e.placeholder},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},a))]}}])},[s("v-list",{attrs:{dense:""}},[e._l(e.quickResults,function(t){return s("v-list-item",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],key:t._id,on:{click:function(s){return e.selectResult(t)}}},[e._t("searchresult",[s("v-list-item-action",{staticClass:"mr-2"},[s("v-icon",[e._v(e._s(e.$vuetify.icons.values[t._modelType]))])],1),s("v-list-item-content",[s("v-list-item-title",[e._v(e._s(t.name||e.formatUsername(t)))])],1)],null,t)],2)}),s("v-list-item",{directives:[{name:"show",rawName:"v-show",value:e.searchText&&0===e.quickResults.length&&!e.loading,expression:"searchText && quickResults.length === 0 && !loading"}]},[e._t("noresult",[s("v-list-item-action",[s("v-icon",[e._v("$vuetify.icons.alert")])],1),s("v-list-item-content",[s("v-list-item-title",[e._v("No results found for query '"+e._s(e.searchText)+"'")]),s("v-list-item-subtitle",[e._v("Modify search parameters or refine your query.")])],1)],null,{searchText:e.searchText})],2),s("v-list-item",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&e.showMore&&e.searchResults.length>e.maxQuickResults,expression:"!loading && showMore && searchResults.length > maxQuickResults"}],on:{click:function(t){return e.$emit("moreresults",e.searchParams)}}},[s("v-list-item-action",[s("v-icon",[e._v("$vuetify.icons.more")])],1),s("v-list-item-content",[s("v-list-item-title",[e._v("More")])],1)],1),e._l(Math.round(e.maxQuickResults/2),function(t){return s("v-list-item",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],key:"skeleton-"+t},[s("v-list-item-action",[s("v-icon",{staticClass:"grey--text text--lighten-1"},[e._v("$vuetify.icons.circle")])],1),s("v-list-item-content",[s("v-list-item-title",{staticClass:"skeleton skeleton--text mb-2",style:{maxWidth:70+t%3*4+"%",height:"12px"}}),s("v-list-item-subtitle",{staticClass:"skeleton skeleton--text",style:{maxWidth:50-t%2*4+"%",height:"6px"}})],1)],1)})],2)],1),e.hideOptionsMenu?e._e():s("v-menu",{attrs:{"offset-y":"",left:"","content-class":"girder-search-arrow-menu","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({attrs:{icon:""}},a),[s("v-icon",{staticClass:"mdi-24px"},[e._v("$vuetify.icons.settings")])],1)]}}],null,!1,2789432402),model:{value:e.searchOptionsMenu,callback:function(t){e.searchOptionsMenu=t},expression:"searchOptionsMenu"}},[s("v-card",[s("v-card-actions",[s("v-col",{staticClass:"pa-0 flex-column",attrs:{"no-gutters":""}},[s("v-radio-group",{staticClass:"my-2",attrs:{"hide-details":""},model:{value:e.internalSearchMode,callback:function(t){e.internalSearchMode=t},expression:"internalSearchMode"}},e._l(e.searchModeOptions,function(e){return s("v-radio",{key:e.value,staticClass:"mb-1",attrs:{label:e.name,value:e.value}})}),1),s("v-divider"),e._l(e.searchTypeOptions,function(t){return s("v-checkbox",{key:t.value,staticClass:"mt-1",attrs:{"hide-details":"",label:t.name,value:t.value},model:{value:e.internalSearchTypes,callback:function(t){e.internalSearchTypes=t},expression:"internalSearchTypes"}})})],2)],1)],1)],1)],1)},J=[];const K=[{name:"Prefix Search",value:"prefix"},{name:"Text Search",value:"text"}],H=K[0].value,W=[{name:"User",value:"user"},{name:"Folder",value:"folder"},{name:"Item",value:"item"}],Q=W.map(e=>e.value);var Y={mixins:[k],props:{hideSearchIcon:{type:Boolean,default:!1},hideOptionsMenu:{type:Boolean,default:!1},maxQuickResults:{type:Number,default:6},placeholder:{type:String,default:null},searchModeOptions:{type:Array,default:()=>K},searchMode:{type:String,default:null},searchTypeOptions:{type:Array,default:()=>W},searchTypes:{validator:e=>Array.isArray(e)||null===e,default:null},showMore:{type:Boolean,default:!1}},inject:["girderRest"],data(){return{searchText:"",lazySearchMode:this.searchMode||H,lazySearchTypes:this.searchTypes||Q,searchOptionsMenu:!1}},computed:{loading(){return this.counter.flag},quickResults(){return this.searchResults.slice(0,this.maxQuickResults)},searchParams(){return{q:this.searchText,mode:this.internalSearchMode,types:JSON.stringify(this.internalSearchTypes),limit:this.maxQuickResults+1}},internalSearchMode:{get(){return this.lazySearchMode},set(e){this.lazySearchMode=e,this.$emit("update:searchMode",e)}},internalSearchTypes:{get(){return this.lazySearchTypes},set(e){this.lazySearchTypes=e,this.$emit("update:searchTypes",e)}}},watch:{searchMode(e){this.lazySearchMode=e||H},searchTypes(e){this.lazySearchTypes=e||Q}},asyncComputed:{searchResults:{default:[],async get(){let e=[];this.counter.inc();try{if(this.searchText){const{data:t}=await this.girderRest.get("resource/search",{params:this.searchParams});e=[].concat(...this.internalSearchTypes.map(e=>t[e]))}}catch(t){this.$emit("error",t.message||"Unknown error during search")}return this.counter.dec(),e}}},beforeCreate(){this.counter=new V},methods:{selectResult(e){this.searchText="",this.$emit("select",e)}}},X=Y,Z=(s("e589"),s("708d"),s("8336")),ee=s("b0af"),te=s("99d9"),se=s("ac7c"),ae=s("62ad"),re=s("ce7e"),ie=s("8860"),oe=s("da13"),ne=s("1800"),le=s("5d23"),ce=s("e449"),de=s("67b6"),ue=s("43a6"),pe=s("0fd9"),he=s("8654"),me=Object(E["a"])(X,G,J,!1,null,"8e3cc672",null),fe=me.exports;M()(me,{VBtn:Z["a"],VCard:ee["a"],VCardActions:te["a"],VCheckbox:se["a"],VCol:ae["a"],VDivider:re["a"],VIcon:z["a"],VList:ie["a"],VListItem:oe["a"],VListItemAction:ne["a"],VListItemContent:le["a"],VListItemSubtitle:le["b"],VListItemTitle:le["c"],VMenu:ce["a"],VRadio:de["a"],VRadioGroup:ue["a"],VRow:pe["a"],VTextField:he["a"]});var ge={name:"AccessControl",components:{Breadcrumb:q,Search:fe},inject:["girderRest"],props:{model:{type:Object,required:!0,validator:e=>O(!1)(e)&&"user"!==e._modelType},hasPermission:{type:Boolean,required:!1,default:!1}},data(){return{public:!1,access:null,recursive:!1,loading:!1}},computed:{groupsAndUsers(){return this.access?[...this.access.groups,...this.access.users]:[]},permissions(){return[{text:"Can view",value:0},{text:"Can edit",value:1},{text:"Is owner",value:2}]}},watch:{model(){this.getAccessControlData()},access(e){this.$emit("update:hasPermission",!!e)}},created(){this.model&&this.getAccessControlData()},methods:{async getAccessControlData(){this.access=null,this.loading=!0,this.public=this.model.public;try{const{data:t}=await this.girderRest.get(`${this.model._modelType}/${this.model._id}/access`);this.access=t}catch(e){this.access=null}this.loading=!1},remove(e){let t=this.access.groups.indexOf(e);-1===t?(t=this.access.users.indexOf(e),-1!==t&&this.access.users.splice(t,1)):this.access.groups.splice(t,1)},groupOrUserSelected(e){this.groupsAndUsers.find(t=>t.id===e._id)||this.access[`${e._modelType}s`].push({flags:[],id:e._id,level:0,name:e.login?`${e.firstName} ${e.lastName}`:e.name,[e.login?"login":"description"]:e.login||e.description})},async save(){const e={users:this.access.users.map(({id:e,level:t,flags:s})=>({id:e,level:t,flags:s})),groups:this.access.groups.map(({id:e,level:t,flags:s})=>({id:e,level:t,flags:s}))},t={access:JSON.stringify(e),public:this.public,publicFlags:[],recurse:this.recursive,progress:!0};await this.girderRest.put(`${this.model._modelType}/${this.model._id}/access`,Object(l["stringify"])(t)),this.$emit("model-access-changed",this.model),this.$emit("close")}}},ve=ge,be=(s("9ff0"),s("b974")),ye=s("2fa4"),we=s("e0c7"),_e=s("b73d"),xe=Object(E["a"])(ve,o,n,!1,null,"49d2d374",null),ke=xe.exports;M()(xe,{VBtn:Z["a"],VCard:ee["a"],VCardActions:te["a"],VCardText:te["b"],VCardTitle:te["c"],VIcon:z["a"],VList:ie["a"],VListItem:oe["a"],VListItemAction:ne["a"],VListItemContent:le["a"],VListItemSubtitle:le["b"],VListItemTitle:le["c"],VSelect:be["a"],VSpacer:ye["a"],VSubheader:we["a"],VSwitch:_e["a"]});var Ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"girder-authentication-component"},[s("v-tabs",{attrs:{"background-color":"primary",dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[s("v-tabs-slider",{attrs:{color:"yellow"}}),s("v-tab",{key:"login"},[e._v("Log In")]),e.register?s("v-tab",{key:"registration"},[e._v("Register")]):e._e()],1),s("v-tabs-items",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[s("v-tab-item",{key:"login-box"},[s("girder-login",e._b({attrs:{"oauth-providers":e.oauthProviders},on:{forgotpassword:function(t){return e.$emit("forgotpassword")}}},"girder-login",{forceOtp:e.forceOtp,forgotPasswordUrl:e.forgotPasswordUrl,forgotPasswordRoute:e.forgotPasswordRoute,hideForgotPassword:e.hideForgotPassword},!1))],1),e.register?s("v-tab-item",{key:"registration-box"},[s("girder-registration",{attrs:{"oauth-providers":e.oauthProviders}})],1):e._e()],1)],1)},$e=[],Se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-widget"},[e._l(e.alerts.errors,function(t){return s("v-alert",{key:t,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!!t,type:"error"}},[e._v(e._s(t))])}),s("v-container",[s("v-form",{ref:"login",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[!e.otpFormVisible||e.forceOtp?s("v-text-field",{attrs:{label:"Username or e-mail",autofocus:"",rules:e.nonEmptyRules,"prepend-icon":"$vuetify.icons.user",type:"text"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}):e._e(),!e.otpFormVisible||e.forceOtp?s("v-text-field",{attrs:{type:"password",label:"Password",rules:e.nonEmptyRules,"prepend-icon":"$vuetify.icons.lock"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}):e._e(),e.otpFormVisible||e.forceOtp?s("v-text-field",{attrs:{type:"text",label:"Authentication code",rules:e.otpRules,"prepend-icon":"$vuetify.icons.otp"},model:{value:e.otp,callback:function(t){e.otp=t},expression:"otp"}}):e._e(),s("v-card-actions",[s("v-btn",{staticClass:"ml-0",attrs:{type:"submit",color:"primary",disabled:e.inProgress,loading:e.inProgress}},[s("v-icon",{attrs:{left:""}},[e._v("$vuetify.icons.login")]),e._v(e._s(e.otpFormVisible?"Verify code":"Login"))],1),e.hideForgotPassword?e._e():[s("v-spacer"),s("v-btn",{attrs:{text:"",color:"primary",to:e.forgotPasswordRoute,href:e.forgotPasswordUrl},on:{click:function(t){return e.$emit("forgotpassword")}}},[e._v("Forgot Password?")])]],2)],1)],1),e.oauthProviders&&e.oauthProviders.length?[s("v-divider"),s("girder-oauth",{attrs:{providers:e.oauthProviders}})]:e._e()],2)},Te=[],Ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticClass:"oauth-widget"},[s("h4",[e._v("Or "+e._s(e.verb)+" with OAuth")]),e._l(e.providers,function(t){return s("v-btn",{key:t.id,staticClass:"ml-0 mr-3",attrs:{dark:e.iconMap[t.id].dark,color:e.iconMap[t.id].color,href:t.url}},[s("v-icon",{attrs:{left:""}},[e._v(e._s(e.$vuetify.icons.values[e.iconMap[t.id].icon]))]),e._v(e._s(t.name))],1)})],2)},Re=[];const Pe={github:{dark:!0,icon:"github"},google:{dark:!0,icon:"google",color:"#3367d6"},linkedin:{dark:!0,icon:"linkedin",color:"#283e4a"},bitbucket:{dark:!1,icon:"bitbucket"},box:{dark:!0,icon:"box_com",color:"#0071f7"},globus:{dark:!0,icon:"globus",color:"#335a95"}};var je={props:{verb:{type:String,default:"sign in"},providers:{type:Array,required:!0}},data(){return{enabledProviders:[],iconMap:Pe}}},Oe=je,Ie=s("a523"),Le=Object(E["a"])(Oe,Ve,Re,!1,null,null,null),Fe=Le.exports;M()(Le,{VBtn:Z["a"],VContainer:Ie["a"],VIcon:z["a"]});const De="authentication must include a one-time password",Ee=[e=>!!e||"Item is required"],Ue=[e=>{const t="6 digit number";try{return parseInt(e,10)&&6===String(e).length||t}catch(s){return t}}];var Me={inject:["girderRest"],components:{GirderOauth:Fe},props:{forceOtp:{type:Boolean,default:!1},forgotPasswordUrl:{type:String,default:null},forgotPasswordRoute:{type:Object,default:null},hideForgotPassword:{type:Boolean,default:!1},oauthProviders:{type:Array,default:()=>[]}},data(){return{username:"",password:"",otp:null,inProgress:!1,alerts:{errors:[]},nonEmptyRules:Ee,otpRules:Ue,otpFormVisible:!1}},methods:{async login(){if(this.$refs.login.validate()){this.alerts.errors=[],this.inProgress=!0;try{await this.girderRest.login(this.username,this.password,this.otp),this.password="",this.otp=null,this.otpFormVisible=!1}catch(e){if(!e.response||401!==e.response.status)throw this.alerts.errors.push("Unknown error."),e;{const{message:t}=e.response.data;t&&t.indexOf(De)>=0?(this.otp=null,this.otpFormVisible=!0,this.$refs.login.resetValidation()):this.alerts.errors.push(t||"Unauthorized.")}}finally{this.inProgress=!1}}}}},Ae=Me,Ne=s("0798"),ze=s("4bd4"),Be=Object(E["a"])(Ae,Se,Te,!1,null,null,null),qe=Be.exports;M()(Be,{VAlert:Ne["a"],VBtn:Z["a"],VCardActions:te["a"],VContainer:Ie["a"],VDivider:re["a"],VForm:ze["a"],VIcon:z["a"],VSpacer:ye["a"],VTextField:he["a"]});var Ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"register-widget"},[e._l(e.alerts.errors,function(t){return s("v-alert",{key:t,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!0,type:"error"}},[e._v(e._s(t))])}),e._l(e.alerts.infos,function(t){return s("v-alert",{key:t,staticClass:"mt-0",attrs:{dismissible:"",transition:"scale-transition",value:!0,type:"info"}},[e._v(e._s(t))])}),s("v-container",[s("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[s("v-text-field",{attrs:{label:"Username",rules:e.nonEmptyRules,type:"text",autofocus:""},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}}),s("v-text-field",{attrs:{label:"Email",rules:e.nonEmptyRules,type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("v-text-field",{attrs:{label:"First Name",rules:e.nonEmptyRules,type:"text"},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),s("v-text-field",{attrs:{label:"Last Name",rules:e.nonEmptyRules,type:"text"},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),s("v-text-field",{attrs:{type:"password",label:"Password",rules:e.nonEmptyRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("v-text-field",{attrs:{type:"password",label:"Retype password",rules:e.retypeMustMatchPasswordRules},model:{value:e.retypePassword,callback:function(t){e.retypePassword=t},expression:"retypePassword"}}),s("v-btn",{staticClass:"ml-0",attrs:{type:"submit",color:"primary",loading:e.inProgress}},[e._v("Register")])],1)],1),e.oauthProviders&&e.oauthProviders.length?[s("v-divider"),s("girder-oauth",{attrs:{verb:"register",providers:e.oauthProviders}})]:e._e()],2)},Je=[],Ke={inject:["girderRest"],components:{GirderOauth:Fe},props:{oauthProviders:{type:Array,default:()=>[]}},data(){const e=[e=>!!e||"Item is required"],t=[...e,e=>e===this.password||"Passwords must match"];return{login:"",email:"",firstName:"",lastName:"",password:"",retypePassword:"",retypePasswordErrors:[],inProgress:!1,alerts:{errors:[],infos:[]},nonEmptyRules:e,retypeMustMatchPasswordRules:t}},methods:{async register(){if(this.$refs.form.validate()){this.inProgress=!0,this.alerts.errors=[],this.alerts.infos=[];try{const t=await this.girderRest.register(this.login,this.email,this.firstName,this.lastName,this.password);t.data.authToken||(this.alerts.infos.push("Registration needs email verification or administrator approval. \nCheck your email to continue."),this.$refs.form.reset())}catch(e){if(!e.response||400!==e.response.status)throw this.alerts.errors.push("Unknown error."),e;this.alerts.errors.push(e.response.data.message||"Invalid registration.")}finally{this.inProgress=!1}}}}},He=Ke,We=Object(E["a"])(He,Ge,Je,!1,null,null,null),Qe=We.exports;M()(We,{VAlert:Ne["a"],VBtn:Z["a"],VContainer:Ie["a"],VDivider:re["a"],VForm:ze["a"],VTextField:he["a"]});var Ye=s("a78e"),Xe=s.n(Ye);const Ze=64,et="#girderToken=",tt="__",st="Girder-Token",at="Girder-OTP",rt="Girder-Authorization";function it(e){Xe.a.set("girderToken",e.token,{expires:new Date(e.expires)})}function ot(e){const t=e.hash.split(et),s=t[t.length-1].split(tt)[0];if(s.length===Ze){const t=new Date;t.setDate((new Date).getDate()+365),it({token:s,expires:t}),e.hash=e.hash.replace(`${et}${s}${tt}`,"")}return s}class nt extends a["a"]{constructor({apiRoot:e="/api/v1",token:t=Xe.a.get("girderToken")||ot(window.location),axios:s=m.a.create(),useGirderAuthorizationHeader:a=!1,setLocalCookie:r=!0}={}){super({data:{user:null,token:t}}),Object.assign(this,s,{apiRoot:e,setLocalCookie:r,useGirderAuthorizationHeader:a}),this.interceptors.request.use(e=>({...e,baseURL:this.apiRoot,headers:{[st]:this.token,...e.headers}}))}async login(e,t,s=null){try{await this.logout()}catch(o){}let a;const r={[st]:null};this.useGirderAuthorizationHeader?r[rt]=`Basic ${window.btoa(`${e}:${t}`)}`:a={username:e,password:t},s&&(r[at]=s);const i=await this.get("user/authentication",{headers:r,auth:a,withCredentials:!0});return this.token=i.data.authToken.token,this.user=i.data.user,this.setLocalCookie&&it(i.data.authToken),this.$emit("login",this.user),i}async logout(){if(this.token)try{await this.delete("user/authentication")}catch(e){if(401!==e.response.status)throw e}finally{this.token=null,this.user=null,Xe.a.remove("girderToken"),this.$emit("logout")}}async fetchUser(){const e=await this.get("user/me");return this.user=e.data,null===this.user&&(this.token=null),this.user}async register(e,t,s,a,r,i=!1){const o=await this.post("user",Object(l["stringify"])({login:e,email:t,firstName:s,lastName:a,password:r,admin:i}));return o.data.authToken?(this.token=o.data.authToken.token,this.user=o.data,this.setLocalCookie&&it(o.data.authToken),this.$emit("register",this.user),this.$emit("login",this.user),o):o}}var lt={inject:["girderRest"],components:{GirderLogin:qe,GirderRegistration:Qe},props:{register:{type:Boolean,default:!1},oauth:{type:Boolean,default:!1},forgotPasswordUrl:{type:String,default:null},forgotPasswordRoute:{type:[Object,String],default:null},forceOtp:{type:Boolean,default:!1},hideForgotPassword:{type:Boolean,default:!1}},data(){return{activeTab:null}},asyncComputed:{async oauthProviders(){if(!this.oauth)return[];try{return(await this.girderRest.get("oauth/provider",{params:{redirect:`${window.location.href}${et}{girderToken}${tt}`,list:!0}})).data}catch(e){return[]}}}},ct=lt,dt=s("71a3"),ut=s("c671"),pt=s("fe57"),ht=s("aac8"),mt=s("9a96"),ft=Object(E["a"])(ct,Ce,$e,!1,null,null,null),gt=ft.exports;M()(ft,{VCard:ee["a"],VTab:dt["a"],VTabItem:ut["a"],VTabs:pt["a"],VTabsItems:ht["a"],VTabsSlider:mt["a"]});var vt=gt,bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("girder-data-table",{staticClass:"girder-file-browser",attrs:{draggable:e.draggable,rows:e.rows,options:e.options,"items-per-page-options":e.itemsPerPageOptions,"server-items-length":e.serverItemsLength,loading:e.loading,selectable:e.internalSelectable},on:{"update:options":function(t){e.options=t},rowclick:e.rowClick,"row-right-click":function(t){return e.$emit("row-right-click",arguments[0],arguments[1])},drag:function(t){return e.$emit("drag",t)},dragstart:function(t){return e.$emit("dragstart",t)},dragend:function(t){return e.$emit("dragend",t)},drop:function(t){return e.$emit("drop",t)}},scopedSlots:e._u([{key:"header",fn:function(t){var a=t.props,r=t.on;return[s("thead",[s("tr",{staticClass:"secondary",class:e.$vuetify.theme.dark?"darken-2":"lighten-5"},[e.internalSelectable?s("th",{staticClass:"pl-3 pr-0",attrs:{width:"1%"}},[s("v-checkbox",{staticClass:"pr-2",attrs:{color:"accent","hide-details":"","input-value":a.everyItem,indeterminate:e.internalValue.length>0&&!a.everyItem},nativeOn:{click:function(e){return r["toggle-select-all"](!a.everyItem)}}})],1):e._e(),s("th",{staticClass:"pl-3",attrs:{colspan:"10",width:"99%"}},[s("v-row",{staticClass:"ma-1"},[e._t("breadcrumb",null,null,{location:e.location,changeLocation:e.changeLocation,rootLocationDisabled:e.rootLocationDisabled}),s("v-spacer"),e._t("headerwidget",null,null,{location:e.location,changeLocation:e.changeLocation,rootLocationDisabled:e.rootLocationDisabled})],2)],1)])])]}},{key:"row-widget",fn:function(t){return[e._t("row-widget",null,null,t)]}}],null,!0),model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})},yt=[],wt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-data-table",{staticClass:"girder-data-table",attrs:{"show-select":"","hide-default-header":"","headers-length":4,value:e.value,options:e.options,"footer-props":{"items-per-page-options":e.itemsPerPageOptions},items:e.rows,"server-items-length":e.serverItemsLength,loading:!!e.loading&&"accent","item-key":"_id"},on:{input:function(t){return e.$emit("input",t)},"update:options":function(t){return e.$emit("update:options",t)}},scopedSlots:e._u([{key:"header",fn:function(t){return[e._t("header",null,null,t)]}},{key:"item",fn:function(t){return[s("tr",{key:t.item._id,staticClass:"itemRow",class:e.getRowClass(t.item),attrs:{draggable:e.draggable,active:t.isSelected},on:{click:function(s){return e.handleRowSelect(s,t)},drag:function(s){return e.$emit("drag",{items:[t],event:s})},dragstart:function(s){return e.$emit("dragstart",{items:[t],event:s})},dragend:function(s){return e.$emit("dragend",{items:[t],event:s})},drop:function(s){return e.$emit("drop",{items:[t],event:s})}}},[e.selectable?s("td",{staticClass:"pl-3 pr-0"},[s("v-checkbox",{attrs:{"input-value":t.isSelected,accent:"","hide-details":""},on:{change:t.select}})],1):e._e(),s("td",{staticClass:"pl-3",attrs:{colspan:"2"},on:{contextmenu:function(s){return e.$emit("row-right-click",t.item,s)}}},[s("span",{staticClass:"text-container nobreak",class:e.getItemClass(t.item),on:{click:function(s){return s.stopPropagation(),e.$emit("rowclick",t.item)}}},[s("v-icon",{staticClass:"pr-2",attrs:{color:t.isSelected?"accent":""}},[e._v(e._s(e.$vuetify.icons.values[t.item.icon]))]),e._v(e._s(t.item.name)),e._t("row-widget",null,null,t)],2)]),s("td",{staticClass:"text-right nobreak"},[e._v(e._s(t.item.humanSize))])])]}},{key:"no-data",fn:function(){return[s("div",{staticClass:"text-center",attrs:{width:"100%"}},[e._v("No Data Available")])]},proxy:!0},{key:"no-results",fn:function(){return[s("div",{staticClass:"text-center",attrs:{width:"100%"}},[e._v("No Data Available")])]},proxy:!0}],null,!0)})},_t=[],xt={props:{draggable:{type:Boolean,default:!1},loading:{type:Boolean,required:!0},options:{type:Object,required:!0},rows:{type:Array,required:!0},selectable:{type:Boolean,required:!0},serverItemsLength:{type:Number,required:!0},value:{type:Array,default:()=>[]},itemsPerPageOptions:{type:Array,default:()=>[10,25,50]}},data(){return{lastCheckBoxIdx:null}},methods:{getLocationType:R,isRootLocation:P,handleRowSelect({shiftKey:e},t){if(this.selectable){if(t.isSelected=!t.isSelected,e&&null!==this.lastCheckBoxIdx){const[e,s]=[this.lastCheckBoxIdx,t.index+1].sort(),a=this.rows.slice(e,s).filter(e=>void 0===this.value.find(t=>t._id===e._id));this.$emit("input",a.concat(this.value))}this.lastCheckBoxIdx=t.index}else this.$emit("rowclick",t.item)},getRowClass(e){const t=!this.selectable&&"folder"===R(e)||P(e)||"user"===R(e);return{"select-cursor":t,"not-public":e.notPublic}},getItemClass(e){const t="item"!==R(e);return{"select-cursor":t}}}},kt=xt,Ct=(s("8d4c"),s("8fea")),$t=Object(E["a"])(kt,wt,_t,!1,null,null,null),St=$t.exports;M()($t,{VCheckbox:se["a"],VDataTable:Ct["a"],VIcon:z["a"]});const Tt="folder",Vt="item";var Rt={components:{GirderDataTable:St},mixins:[_],inject:["girderRest"],props:{draggable:{type:Boolean,default:!1},location:{type:Object,required:!0,validator:O(!0)},selectable:{type:Boolean,default:!1},noRootLocation:{type:Boolean,default:!1},upload:{type:Boolean,default:!1},rootLocationDisabled:{type:Boolean,default:!1},value:{type:Array,default:()=>[]},initialItemsPerPage:{type:Number,default:10},itemsPerPageOptions:{type:Array,default:()=>[10,25,50]}},data(){return{options:{itemsPerPage:this.initialItemsPerPage,page:1},internalRefreshCounter:0,rows:[],rowsLoading:!1,lazyValue:this.value||[]}},computed:{loading(){return this.rowsLoading},serverItemsLength(){return Object.values(this.counts).reduce((e,t)=>e+t,0)},internalSelectable(){return this.selectable&&this.location&&!P(this.location)},internalValue:{get(){return this.lazyValue},set(e){this.lazyValue=e,this.$emit("input",e)}}},asyncComputed:{counts:{default:{nFolders:0,nItems:0,nUsers:0,nCollections:0},async get(){const e={nFolders:0,nItems:0,nUsers:0,nCollections:0},t=R(this.location),{_id:s}=this.location;if(-1!==["folder","user","collection"].indexOf(t)){const{data:a}=await this.girderRest.get(`${t}/${s}/details`);return{...e,nFolders:a.nFolders||0,nItems:a.nItems||0}}if("users"===t||"collections"===t){const{data:s}=await this.girderRest.get(`${this.getResourceType(t)}/details`);return{...e,[Object.keys(s)[0]]:Object.values(s)[0]}}return"root"===t?{...e,nUsers:1,nCollections:1}:e},watch(){return[this.internalRefreshCounter,this.location,this.girderRest.user]}}},watch:{location(e){O(!this.rootLocationDisabled)(e)&&(this.options.page=1,this.internalValue=[])},value(e){this.lazyValue=e},async counts(){this.rows=await this.fetchPaginatedRows()},async options(){this.rows=await this.fetchPaginatedRows()}},created(){if(!O(!this.rootLocationDisabled)(this.location))throw new Error("root location cannot be used when root-location-disabled is true")},methods:{rowClick(e){this.$emit("rowclick",e,this.location),"item"!==R(e)&&this.changeLocation(e)},changeLocation(e){const{location:t}=this,s=R(e),a=R(t);t._id===e._id&&a===s||this.$emit("update:location",e)},refresh(){this.selected=[],this.internalRefreshCounter+=1},fetchPaginatedRows(){const{location:e,counts:t}=this;if(t.nFolders||t.nItems)return this.fetchPaginatedFolderRows();const s=R(e);if("users"===s||"collections"===s){if(t.nUsers||t.nCollections){const t=j(e);return this.fetchPaginatedCollectionOrUserRows(t)}}else if("root"===s)return this.generateRootRows();return[]},async fetchPaginatedFolderRows(){this.rowsLoading=!0;const{counts:{nFolders:e,nItems:t},location:s,options:{page:a,itemsPerPage:r}}=this;let i=!1;s.created||"folder"!==s._modelType||(i=!(await this.girderRest.get(`folder/${s._id}`)).data.public);const o=[],n=-1===r?0:(a-1)*r,l=Math.max(e-n,0);if(0!==l){const e={parentType:s._modelType,parentId:s._id,limit:-1===r?0:r,offset:n};o.push(this.girderRest.get(Tt,{params:e}))}const c=Math.max(n-e,0),d=Math.max(t-c,0);if(d>0&&(-1===r||r-l>0)){const e={folderId:s._id,limit:-1===r?0:r-l,offset:c};o.push(this.girderRest.get(Vt,{params:e}))}const u=(await Promise.all(o)).map(e=>e.data),p=[].concat.apply(...u).map(e=>({...e,humanSize:e.size?this.formatSize(e.size):"",icon:this.getModelIcon(e),notPublic:"folder"===e._modelType?!e.public:i}));return this.rowsLoading=!1,p},async fetchPaginatedCollectionOrUserRows(e){this.rowsLoading=!0;const{page:t,itemsPerPage:s}=this.options,{data:a}=await this.girderRest.get(e,{params:{limit:s>=0?s:null,offset:(t-1)*s}}),r=a.map(e=>({...e,name:"user"===e._modelType?`${e.firstName} ${e.lastName}`:e.name,humanSize:e.size?this.formatSize(e.size):"",icon:e._modelType}));return this.rowsLoading=!1,r},generateRootRows(){const e=[{_modelType:"collections",name:"Collections",icon:"collection"}];return this.girderRest.user&&e.push({_modelType:"users",name:"Users",icon:"user"}),e},getResourceType(e){switch(e){case"collections":return"collection";case"users":return"user";default:return""}},getModelIcon(e){switch(e._modelType){case"folder":return e.public?"folder":"folderNonPublic";default:return e._modelType in this.$vuetify.icons.values?e._modelType:"file"}}}},Pt=Rt,jt=Object(E["a"])(Pt,bt,yt,!1,null,null,null),Ot=jt.exports;M()(jt,{VCheckbox:se["a"],VRow:pe["a"],VSpacer:ye["a"]});var It=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"data-details"},[s("v-toolbar",{attrs:{flat:"",dark:"",dense:"",color:"primary"}},[s("v-toolbar-title",{staticClass:"subtitle-1"},[s("v-icon",{staticClass:"pr-2 mdi-18px"},[e._v(e._s(e.icon))]),e._v(e._s(e.title))],1),s("v-spacer"),e.datum?s("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({attrs:{icon:""}},a),[s("v-icon",{staticClass:"mdi-18px"},[e._v(e._s(e.$vuetify.icons.edit))])],1)]}}],null,!1,830038601),model:{value:e.showUpsert,callback:function(t){e.showUpsert=t},expression:"showUpsert"}},[s("girder-upsert-folder",{key:e.datum._id,attrs:{edit:!0,location:e.datum},on:{dismiss:function(t){e.showUpsert=!1}}})],1):e._e()],1),e.details&&e.details.description?s("girder-markdown",{staticClass:"mx-3 mt-2",attrs:{text:e.details.description}}):e._e(),s("girder-detail-list",{attrs:{title:"Info",rows:e.info}}),e.meta.length?s("girder-detail-list",{attrs:{title:"Meta",rows:e.meta},scopedSlots:e._u([{key:"row",fn:function(t){return[s("v-row",{attrs:{justify:"space-between"}},[s("v-col",{staticClass:"shrink py-1 body-2 font-weight-bold"},[e._v(e._s(t.datum.key))]),s("v-col",{staticClass:"py-1 body-2 d-flex justify-end"},[e._v(e._s(t.datum.value))])],1)]}}],null,!1,1927103446)}):e._e(),e.files.length?s("girder-detail-list",{attrs:{title:"Files ("+e.files.length+")",rows:e.files}}):e._e(),e.actions.length?s("girder-detail-list",{attrs:{title:"Actions",clickable:!0,rows:e.actions},on:{click:e.handleAction},scopedSlots:e._u([{key:"row",fn:function(t){return[s("v-list-item-icon",{staticClass:"mr-1"},[s("v-icon",{staticClass:"pr-2",attrs:{color:t.datum.color}},[e._v(e._s(t.datum.icon||e.$vuetify.icons.values[t.datum.iconKey]))])],1),s("v-list-item-content",{class:t.datum.color+"--text"},[e._v(e._s(t.datum.name))])]}}],null,!1,2270599376)}):e._e()],1)},Lt=[],Ft=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.rows.length?s("v-list",{attrs:{dense:""}},[s("v-subheader",{staticClass:"subtitle-1 font-weight-bold pl-4"},[e._v(e._s(e.title))]),e._l(e.rows,function(t,a){return[s("v-list-item",e._g({key:a,staticClass:"allow-select"},e.clickable?{click:function(){return e.$emit("click",t)}}:{}),[e._t("row",[s("v-list-item-content",[s("div",{staticClass:"body-2 no-overflow"},[e._v(e._s(t))])])],{datum:t})],2),a<e.rows.length-1?s("v-divider",{staticClass:"mx-3"}):e._e()]})],2):e._e()},Dt=[],Et={props:{title:{type:String,required:!0},rows:{type:Array,required:!0},clickable:{type:Boolean,default:!1}}},Ut=Et,Mt=(s("e837"),Object(E["a"])(Ut,Ft,Dt,!1,null,"076eca42",null)),At=Mt.exports;M()(Mt,{VDivider:re["a"],VList:ie["a"],VListItem:oe["a"],VListItemContent:le["a"],VSubheader:we["a"]});var Nt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"g-md-viewer",domProps:{innerHTML:e._s(e.markdown)}})},zt=[],Bt=s("d4cd"),qt=s.n(Bt),Gt={props:{text:{default:"",type:String}},computed:{markdown(){return qt()({linkify:!0}).render(this.text)}}},Jt=Gt,Kt=(s("23cb"),Object(E["a"])(Jt,Nt,zt,!1,null,null,null)),Ht=Kt.exports,Wt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-form",{on:{submit:function(t){return t.preventDefault(),e.upsert(t)}}},[s("v-card",{attrs:{flat:""}},[s("v-row",{staticClass:"pa-2 flex-column",attrs:{"no-gutters":""}},[e._t("header",[s("v-card-title",{staticClass:"pb-0",attrs:{"primary-title":""}},[s("h5",{staticClass:"display-1"}),e._v(e._s(e.edit?"Edit Folder":"Create New Folder"))])]),s("v-card-text",[s("v-text-field",{ref:"folderName",attrs:{autofocus:"",label:"Folder Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),s("girder-breadcrumb",e._b({staticClass:"mb-3",attrs:{readonly:""}},"girder-breadcrumb",{location:e.location,append:e.append},!1)),s("girder-markdown-editor",{attrs:{label:"Description (Optional)"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),s("v-alert",{attrs:{type:"error",value:!!e.error,dismissible:"",transition:"scale-transition"}},[e._v(e._s(e.error))])],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("dismiss")}}},[e._v("Cancel")]),s("v-btn",{attrs:{depressed:"",color:"primary",type:"submit",disabled:!e.name}},[e._v(e._s(e.edit?"Save Changes":"Create Folder"))])],1)],2)],1)],1)},Qt=[],Yt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"girder-markdown-editor"},[s("v-tabs",{staticClass:"md-tab",model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[s("v-tab",{key:"edit"},[e._v("Edit")]),s("v-tab-item",[s("v-textarea",{attrs:{"hide-details":"",filled:"","single-line":"",label:e.label,placeholder:e.placeholder},model:{value:e.text_,callback:function(t){e.text_=t},expression:"text_"}})],1),s("v-tab",{key:"preview"},[e._v("Preview")]),s("v-tab-item",{staticClass:"md-preview pa-2 grey lighten-3"},[s("girder-markdown",{attrs:{text:e.text_}})],1)],1),s("v-toolbar",{attrs:{dark:"",color:"secondary darken-2"}},[s("span",{staticClass:"hidden-xs-only"},[e._v("Supports"),s("a",{attrs:{href:"https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet"}},[e._v(" Markdown")])]),s("v-spacer"),s("v-toolbar-items",[s("v-btn",{class:{active:0===e.activeTab},attrs:{text:""},on:{click:function(t){e.activeTab=0}}},[s("v-row",{staticClass:"flex-column align-center justify-content",attrs:{"no-gutters":""}},[s("v-icon",{staticClass:"mdi-24px"},[e._v("$vuetify.icons.edit")]),s("span",{staticClass:"caption text-capitalize"},[e._v("Write")])],1)],1),s("v-btn",{class:{active:1===e.activeTab},attrs:{text:""},on:{click:function(t){e.activeTab=1}}},[s("v-row",{staticClass:"flex-column align-center justify-content",attrs:{"no-gutters":""}},[s("v-icon",{staticClass:"mdi-24px"},[e._v("$vuetify.icons.preview")]),s("span",{staticClass:"caption text-capitalize"},[e._v("Preview")])],1)],1)],1)],1)],1)},Xt=[],Zt={components:{GirderMarkdown:Ht},model:{prop:"text",event:"changed"},props:{placeholder:{default:null,type:String},text:{default:"",type:String},label:{type:String,default:""}},data(){return{activeTab:0,text_:this.text}},watch:{text(){this.text_=this.text},text_(){this.$emit("changed",this.text_)}}},es=Zt,ts=(s("0e3a"),s("a844")),ss=s("71d9"),as=s("2a7f"),rs=Object(E["a"])(es,Yt,Xt,!1,null,null,null),is=rs.exports;M()(rs,{VBtn:Z["a"],VIcon:z["a"],VRow:pe["a"],VSpacer:ye["a"],VTab:dt["a"],VTabItem:ut["a"],VTabs:pt["a"],VTextarea:ts["a"],VToolbar:ss["a"],VToolbarItems:as["a"]});const os="folder";var ns={components:{GirderBreadcrumb:q,GirderMarkdownEditor:is},props:{location:{type:Object,required:!0,validator:O(!1)},edit:{type:Boolean,default:!1},preUpsert:{type:Function,default:()=>{}},postUpsert:{type:Function,default:()=>{}}},inject:["girderRest"],data(){return{name:"",description:"",error:""}},computed:{append(){return this.edit?[]:[this.name||"New Folder"]}},mounted(){this.edit&&this.loadFolder(this.location._id)},methods:{async upsert(){this.error="";try{await this.preUpsert(),this.edit?await this.girderRest.put(`${os}/${this.location._id}`,Object(l["stringify"])({name:this.name,description:this.description})):await this.girderRest.post(os,Object(l["stringify"])({parentType:this.location._modelType,parentId:this.location._id,name:this.name,description:this.description,reuseExisting:!1})),await this.postUpsert(),this.name="",this.description="",this.$emit("done")}catch(e){this.$emit("error",{type:"upsert",error:e}),this.setError(e)}},async loadFolder(e){this.error="";try{const{data:s}=await this.girderRest.get(`${os}/${e}`);this.name=s.name,this.description=s.description}catch(t){this.$emit("error",{type:"load",error:t}),this.setError(t)}},setError(e){if(e.response){const{data:t={}}=e.response,{type:s="unknown",message:a,field:r="unknown"}=t;this.error=`${s} error on ${r}: ${a||e.message}`}else this.error=`Unknown error: ${e.message}`}}},ls=ns,cs=Object(E["a"])(ls,Wt,Qt,!1,null,null,null),ds=cs.exports;function us(e,t,s,a=""){if(["resource","folder","item","file"].indexOf(t)<0)throw new Error(`${t} is not downloadable`);const r=s?`${s}/`:"",i=`${e}/${t}/${r}download${a}`;window.open(i,"_blank")}M()(cs,{VAlert:Ne["a"],VBtn:Z["a"],VCard:ee["a"],VCardActions:te["a"],VCardText:te["b"],VCardTitle:te["c"],VForm:ze["a"],VRow:pe["a"],VSpacer:ye["a"],VTextField:he["a"]});const ps=[{value:"size",name:"Size: ",transform:_.methods.formatSize},{value:"created",name:"Created on ",transform:w.methods.formatDate},{value:"updated",name:"Updated on ",transform:w.methods.formatDate},{value:"_id",name:"Unique ID: "}],hs=[{for:["item"],name:"View Item",iconKey:"view",color:"primary",handler(){const{value:e}=this;us(this.girderRest.apiRoot,e[0]._modelType,e[0]._id,"?contentDisposition=inline")}},{for:["item"],name:"Download",iconKey:"download",color:"secondary",handler(){const{value:e}=this;us(this.girderRest.apiRoot,e[0]._modelType,e[0]._id)}},{for:["folder","multi"],name:"Download (zip)",iconKey:"download",color:"secondary",handler(){const{value:e}=this,t={item:[],folder:[]};e.forEach(e=>t[e._modelType].push(e._id)),us(this.girderRest.apiRoot,"resource",null,`?resources=${JSON.stringify(t)}`)}},{for:["item","folder","multi"],name:"Delete",iconKey:"delete",color:"error",async handler(){const{value:e}=this,t={item:[],folder:[]};e.forEach(e=>t[e._modelType].push(e._id)),await this.girderRest.delete("resource",{params:{resources:JSON.stringify(t),progress:!0}})}}];var ms={components:{GirderDetailList:At,GirderMarkdown:Ht,GirderUpsertFolder:ds},mixins:[_,k],props:{value:{required:!0,type:Array},infoKeys:{type:Array,default:()=>ps},actionKeys:{type:Array,default:()=>hs}},data(){return{showUpsert:!1}},inject:["girderRest"],asyncComputed:{async details(){if(this.datum&&this.datum.created)return this.datum;if(this.datum&&this.datum._id&&this.datum._modelType){const{data:e}=await this.girderRest.get(`${this.datum._modelType}/${this.datum._id}`);return e}return null},files:{default:[],async get(){if(this.datum&&"item"===this.datum._modelType){const{data:e}=await this.girderRest.get(`item/${this.datum._id}/files`);return e.map(e=>e.name)}return[]}}},computed:{title(){return this.details?this.details.name||this.formatUsername(this.details):`${this.value.length} Selection(s)`},datum(){return 1===this.value.length?this.value[0]:void 0},icon(){return this.datum?this.$vuetify.icons.values[this.datum._modelType]:this.$vuetify.icons.values.fileMultiple},meta(){return this.details&&"meta"in this.details?Object.entries(this.details.meta).map(([e,t])=>({key:e,value:t})):[]},info(){if(this.details)return this.infoKeys.map(e=>{let t=this.details[e.value];return e.transform&&(t=e.transform(t)),`${e.name}${t}`});if(this.value.length>1){const e=(e,t)=>{return e[t._modelType]+=1,e.size+=t.size,e},t=this.value.reduce(e,{item:0,folder:0,size:0}),s=["item","folder"].filter(e=>t[e]>0).map(e=>`${t[e]} ${e}(s) selected`),a=`Total size: ${this.formatSize(t.size)}`;return[...s,a]}return[]},actions(){if(0===this.value.length)return[];const e=this.datum?this.datum._modelType:"multi";return this.actionKeys.filter(t=>t.for.includes(e))}},methods:{async handleAction(e){await e.handler.apply(this),this.$emit("action",e)}}},fs=ms,gs=s("169a"),vs=s("34c3"),bs=Object(E["a"])(fs,It,Lt,!1,null,null,null),ys=bs.exports;M()(bs,{VBtn:Z["a"],VCard:ee["a"],VCol:ae["a"],VDialog:gs["a"],VIcon:z["a"],VListItemContent:le["a"],VListItemIcon:vs["a"],VRow:pe["a"],VSpacer:ye["a"],VToolbar:ss["a"],VToolbarTitle:as["b"]});var ws=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"job-filter",attrs:{dark:"",color:"primary"}},[s("v-card-title",[s("v-container",[s("h4",[e._v("Jobs")]),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{sm:"5",md:"4"}},[s("v-select",{attrs:{label:"Job Type",items:e.jobTypeList,value:e.jobType,clearable:"",color:"white","menu-props":{"content-class":"girder-job-filter-form-menu"},dense:""},on:{input:function(t){return e.$emit("update:jobType",t||null)}}})],1),s("v-col",{attrs:{sm:"5",md:"4"}},[s("v-select",{attrs:{label:"Status",items:e.statusItemList,value:e.status,clearable:"",color:"white","menu-props":{"content-class":"girder-job-filter-form-menu"},dense:""},on:{input:function(t){return e.$emit("update:status",t||null)}}})],1)],1)],1)],1)],1)},_s=[],xs={props:{jobType:{type:[String,Object],default:null},jobTypeList:{type:Array,default(){return[]}},status:{type:[Number,Object],default:null},statusList:{type:Array,default(){return[]}}},data(){return{fromDateMenu:!1,toDateMenu:!1}},computed:{statusItemList(){return this.statusList.map(p).filter(e=>e&&e.text).sort((e,t)=>{return e.text>t.text?1:e.text<t.text?-1:0})}}},ks=xs,Cs=Object(E["a"])(ks,ws,_s,!1,null,null,null),$s=Cs.exports;M()(Cs,{VCard:ee["a"],VCardTitle:te["c"],VCol:ae["a"],VContainer:Ie["a"],VRow:pe["a"],VSelect:be["a"]});var Ss=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"girder-job-list",attrs:{color:"primary"}},[s("filter-form",{attrs:{"from-date":e.jobFilter.fromDate,"to-date":e.jobFilter.toDate,status:e.jobFilter.status,"job-type":e.jobFilter.jobType,"status-list":e.typeAndStatusList.statuses,"job-type-list":e.typeAndStatusList.types},on:{"update:fromDate":function(t){return e.$set(e.jobFilter,"fromDate",t)},"update:from-date":function(t){return e.$set(e.jobFilter,"fromDate",t)},"update:toDate":function(t){return e.$set(e.jobFilter,"toDate",t)},"update:to-date":function(t){return e.$set(e.jobFilter,"toDate",t)},"update:status":function(t){return e.$set(e.jobFilter,"status",t)},"update:jobType":function(t){return e.$set(e.jobFilter,"jobType",t)},"update:job-type":function(t){return e.$set(e.jobFilter,"jobType",t)}}}),s("job-table",{attrs:{jobs:e.jobs,options:e.options,"more-pages":e.morePages},on:{"update:options":function(t){e.options=t},"job-click":function(t,s){return e.$emit("job-click",t,s)}},scopedSlots:e._u([e.$scopedSlots.jobwidget?{key:"jobwidget",fn:function(t){return[e._t("jobwidget",null,null,t)]}}:null],null,!0)})],1)},Ts=[],Vs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-data-table",{attrs:{"item-key":"_id",headers:e.headers_,items:e.items,"server-items-length":e.serverItemsLength,options:e.options},on:{"update:options":function(t){return e.$emit("update:options",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[s("tr",{on:{click:function(s){return e.$emit("job-click",s,t.item)}}},[s("td",{staticClass:"one-line"},[e._v(e._s(t.item.title))]),s("td",{staticClass:"one-line"},[e._v(e._s(t.item.type))]),s("td",{staticClass:"one-line"},[e._v(e._s(t.item.updateString))]),s("td",{staticClass:"one-line",attrs:{nowrap:"",title:t.item.statusText}},[s("job-progress",{attrs:{"formatted-job":t.item}})],1),s("td",{staticClass:"one-line pa-0"},[e._t("jobwidget",null,null,t)],2)])]}},{key:"footer.page-text",fn:function(){return[s("div",{staticClass:"v-datatable__actions__options"},[e._v(e._s(e.pageRange.first)+"-"+e._s(e.pageRange.last))])]},proxy:!0}],null,!0)})},Rs=[],Ps=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"d-flex progress-bar align-center"},[s("v-progress-linear",{staticClass:"mr-3",attrs:{color:e.formattedJob.statusColor,value:e.formattedJob.progressNumber,indeterminate:!!e.formattedJob.indeterminate,height:"10"}}),s("v-icon",{staticClass:"status-icon",class:e.formattedJob.class,attrs:{color:e.formattedJob.statusColor,size:20}},[e._v(e._s(e.formattedJob.statusIcon))])],1)},js=[],Os={props:{formattedJob:{type:Object,required:!0}}},Is=Os,Ls=(s("e738"),s("8e36")),Fs=Object(E["a"])(Is,Ps,js,!1,null,"1c7e4689",null),Ds=Fs.exports;M()(Fs,{VIcon:z["a"],VProgressLinear:Ls["a"]});var Es={components:{JobProgress:Ds},mixins:[C],props:{jobs:{type:Array,required:!0},options:{type:Object,required:!0},morePages:{type:Boolean,default:!0}},data(){return{headers:[{text:"Job Title",value:"title"},{text:"Type",value:"type"},{text:"Last Updated",value:"updated"},{text:"Status",value:"status"}]}},computed:{items(){return this.jobs.map(this.formatJob)},headers_(){const e={sortable:!1,align:"end"};return this.headers.concat(this.$scopedSlots.jobwidget?e:[])},serverItemsLength(){let{last:e}=this.pageRange;return this.morePages&&(e+=1),e},pageRange(){const e=this.options.itemsPerPage*(this.options.page-1)+1,t=e+this.jobs.length-1;return{first:e,last:t}}}},Us=Es,Ms=(s("5aa8"),Object(E["a"])(Us,Vs,Rs,!1,null,"12d325e6",null)),As=Ms.exports;M()(Ms,{VDataTable:Ct["a"]});var Ns={inject:["girderRest","notificationBus"],components:{JobTable:As,FilterForm:$s},data(){return{jobFilter:{fromDate:null,toDate:null,status:null,jobType:null},options:{itemsPerPage:10,page:1,sortBy:["updated"],descending:!0},morePages:!0,refresh:0}},watch:{jobFilter:{handler(){this.options.page=1},deep:!0}},asyncComputed:{jobs:{async get(){this.girderRest.user,this.refresh;const e=this.options,t={limit:e.itemsPerPage+1,offset:e.itemsPerPage*(e.page-1)};e.sortBy&&(t.sort=e.sortBy,t.sortdir=e.descending?-1:1),null!==this.jobFilter.status&&(t.statuses=JSON.stringify([this.jobFilter.status])),null!==this.jobFilter.jobType&&(t.types=JSON.stringify([this.jobFilter.jobType]));const s=await this.girderRest.get(`job?${Object(l["stringify"])(t)}`);return s.data.length<t.limit?this.morePages=!1:this.morePages=!0,s.data.slice(0,e.itemsPerPage)},default(){return[]}},typeAndStatusList:{async get(){this.girderRest.user;const e=await this.girderRest.get("job/typeandstatus");return e.data},default(){return{statuses:[],types:[]}}}},mounted(){this.refreshJobFunc=()=>{this.refreshJobList()},this.notificationBus.$on("message:job_status",this.refreshJobFunc),this.notificationBus.$on("message:job_created",this.refreshJobFunc)},beforeDestroy(){this.notificationBus.$off("message:job_status",this.refreshJobFunc),this.notificationBus.$off("message:job_created",this.refreshJobFunc)},methods:{refreshJobList(){this.refresh+=1}}},zs=Ns,Bs=Object(E["a"])(zs,Ss,Ts,!1,null,null,null),qs=Bs.exports;M()(Bs,{VCard:ee["a"]});var Gs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"fill-height",attrs:{flat:""}},[s("v-row",{staticClass:"flex-column fill-height",attrs:{"no-gutters":""}},[e._t("header",[s("v-card-title",{attrs:{"primary-title":""}},[s("div",[s("div",{staticClass:"headline"},[e._v("Upload to "),s("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.dest.name))])]),s("div",{staticClass:"grey--text title"},[e._v(e._s(e.statusMessage))])])])]),e.uploading?s("v-progress-linear",{attrs:{value:e.totalProgressPercent,height:"20"}}):e._e(),s("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:e.files.length&&!e.errorMessage&&!e.uploading,expression:"files.length && !errorMessage && !uploading"}]},[s("v-btn",{attrs:{text:""},on:{click:function(t){e.files=[]}}},[e._v("Clear all")]),s("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.startUpload}},[e._v(e._s(e.startButtonText))])],1),s("v-col",[e._t("dropzone",[e.files.length?e._e():s("dropzone",{attrs:{message:e.dropzoneMessage,multiple:e.multiple,accept:e.accept},on:{change:e.inputFilesChanged}})])],2),e.errorMessage?s("div",[s("v-alert",{attrs:{value:!0,dark:"",type:"error"}},[e._v(e._s(e.errorMessage)),e.uploading?e._e():s("v-btn",{attrs:{dark:"",outlined:""},on:{click:e.startUpload}},[e._v("Resume upload")])],1)],1):e._e(),e._t("files",[s("file-upload-list",e._b({on:{input:e.setFiles}},"file-upload-list",{value:e.files,currentIndex:e.currentIndex,maxShow:e.maxShow},!1))],null,{files:e.files,setFiles:e.setFiles,currentIndex:e.currentIndex,maxShow:e.maxShow})],2)],1)},Js=[],Ks=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dropzone-wrapper",class:e.dropzoneClass,on:{dragenter:function(t){e.dropzoneClass="animate"},dragleave:function(t){e.dropzoneClass=null},drop:function(t){e.dropzoneClass=null}}},[s("v-row",{staticClass:"flex-column align-center justify-center fill-height dropzone-message"},[s("v-icon",{attrs:{size:"50px"}},[e._v("$vuetify.icons.fileUpload")]),s("div",{staticClass:"title mt-3"},[e._v(e._s(e.message))])],1),s("input",{staticClass:"file-input",attrs:{type:"file",multiple:e.multiple,accept:e.accept},on:{change:function(t){e.$emit("change",Array.apply(void 0,t.target.files))}}})],1)},Hs=[],Ws={props:{message:{type:String,required:!0},multiple:{type:Boolean,required:!0},accept:{type:String,default:null}},data(){return{dropzoneClass:null}}},Qs=Ws,Ys=(s("12b3"),Object(E["a"])(Qs,Ks,Hs,!1,null,"b89ee2a8",null)),Xs=Ys.exports;M()(Ys,{VIcon:z["a"],VRow:pe["a"]});var Zs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-list",{directives:[{name:"show",rawName:"v-show",value:e.value.length,expression:"value.length"}],attrs:{dense:""}},[e._l(e.shownFiles,function(t,a){return s("div",{key:t.file.name,staticClass:"file-tile",class:"status-"+t.status},[a>0?s("v-divider"):e._e(),s("v-list-item",[s("v-list-item-icon",["pending"===t.status?s("v-btn",{attrs:{icon:""},on:{click:function(t){e.$emit("input",e.splice(a))}}},[s("v-icon",[e._v("$vuetify.icons.close")])],1):e._e(),"uploading"===t.status?s("v-progress-circular",{attrs:{color:"primary",rotate:-90,value:e.progressPercent(Object.assign({},t.progress,{total:t.progress.size})),indeterminate:t.progress.indeterminate}}):e._e(),"done"===t.status?s("v-icon",{attrs:{color:"success",large:""}},[e._v("$vuetify.icons.complete")]):e._e(),"error"===t.status?s("v-icon",{attrs:{color:"error",large:""}},[e._v("$vuetify.icons.error")]):e._e()],1),s("v-list-item-content",[s("v-list-item-title",[e._v(e._s(t.file.name))]),s("v-list-item-subtitle",[t.progress.current?s("span",[e._v(e._s(e.formatSize(t.progress.current))+" /")]):e._e(),s("span",[e._v(e._s(e.formatSize(t.file.size)))])])],1),e._t("item",null,null,{file:t})],2)],1)}),e.hiddenCount?[s("v-divider"),s("v-list-item",[s("v-list-item-content",[s("div",{staticClass:"grey--text subtitle-1"},[e._v("+ "+e._s(e.hiddenCount)+" more...")])])],1)]:e._e()],2)},ea=[],ta={mixins:[x,_],props:{value:{type:Array,required:!0},maxShow:{type:Number,default:0},currentIndex:{type:Number,default:0}},computed:{shownFiles(){return this.maxShow?this.value.slice(this.currentIndex,this.maxShow+this.currentIndex):this.value},hiddenCount(){return this.maxShow?Math.max(this.value.length-this.maxShow-this.currentIndex,0):0}},methods:{splice(e){return[...this.value.slice(0,e),...this.value.slice(e+1)]}}},sa=ta,aa=(s("c27d"),s("490a")),ra=Object(E["a"])(sa,Zs,ea,!1,null,"ae1a0400",null),ia=ra.exports;M()(ra,{VBtn:Z["a"],VDivider:re["a"],VIcon:z["a"],VList:ie["a"],VListItem:oe["a"],VListItemContent:le["a"],VListItemIcon:vs["a"],VListItemSubtitle:le["b"],VListItemTitle:le["c"],VProgressCircular:aa["a"]});var oa={components:{Dropzone:Xs,FileUploadList:ia},mixins:[$,x,_],inject:["girderRest"],props:{dest:{required:!0,type:Object},maxShow:{default:0,type:Number},multiple:{default:!0,type:Boolean},preUpload:{default:()=>{},type:Function},postUpload:{default:()=>{},type:Function},uploadCls:{default:y,type:Function},accept:{default:null,type:String},startButtonText:{default:"Start Upload",type:String}},data:()=>({dragover:!1}),computed:{dropzoneMessage(){return this.multiple?"Drag files here or click to select them":"Drag a file here or click to select one"},statusMessage(){return this.uploading?`${this.formatSize(this.totalProgress)} / ${this.formatSize(this.totalSize)} `+`(${this.totalProgressPercent}%)`:`${this.files.length} selected (${this.formatSize(this.totalSize)} total)`}},methods:{startUpload(){const{dest:e,uploadCls:t,preUpload:s,postUpload:a}=this;this.start({dest:e,uploadCls:t,preUpload:s,postUpload:a})}}},na=oa,la=Object(E["a"])(na,Gs,Js,!1,null,null,null),ca=la.exports;function da(e){e.use(i["a"]),e.use(r["a"])}M()(la,{VAlert:Ne["a"],VBtn:Z["a"],VCard:ee["a"],VCardActions:te["a"],VCardTitle:te["c"],VCol:ae["a"],VProgressLinear:Ls["a"],VRow:pe["a"]});const ua=new i["a"]({...T});var pa={install:da};class ha extends a["a"]{constructor(e,{EventSource:t=window.EventSource,listenToRestClient:s=!0,pollingInterval:a=[500,5e3,1e3],since:r=new Date,useEventSource:i=!1,withCredentials:o=!0}={}){super(),Object.assign(this,{$rest:e,EventSource:t,pollingInterval:a,since:r,useEventSource:i,withCredentials:o}),s&&(e.$on("login",()=>{this.connect()}),e.$on("logout",()=>{this.disconnect()}))}_emitNotification(e){const{type:t,updated:s}=e;s&&(this.since=new Date(Math.max(+this.since,+new Date(s))));for(let a=t.indexOf(".");-1!==a;a=t.indexOf(".",a+1))this.$emit(`message:${t.substring(0,a)}`,e,this);this.$emit(`message:${t}`,e,this),this.$emit("message",e,this)}_onSseMessage({data:e}){this._emitNotification(JSON.parse(e))}_onSseError(e){this.$emit("error",e,this),this.disconnect(),this.useEventSource=!1,this.connect()}get connected(){return!(!this._eventSource&&!this._poller)}connect(){if(!this.connected)if(this.useEventSource&&this.EventSource){const e=Math.ceil(+this.since/1e3),t=`${this.$rest.apiRoot}/notification/stream?since=${e}`;this._eventSource=new this.EventSource(t,{withCredentials:this.withCredentials}),this._eventSource.onmessage=this._onSseMessage.bind(this),this._eventSource.onerror=this._onSseError.bind(this),this.$emit("start",this)}else this._poll()}disconnect(){this._stopPolling(),this._eventSource&&(this._eventSource.close(),this._eventSource=null,this.$emit("stop",this))}_poll(e=0){const[t,s,a]=this.pollingInterval;let r;this._poller=setTimeout(async()=>{try{const{data:o}=await this.$rest.get(`/notification?since=${this.since.toISOString()}`);o.forEach(this._emitNotification.bind(this)),r=o.length?t:0===e?s:Math.min(e+a,s)}catch(i){r=s}finally{this._poll(r)}},e)}_stopPolling(){clearTimeout(this._poller),this._poller=null}}var ma=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",{staticClass:"app"},[s("v-navigation-drawer",{attrs:{app:""}},[s("v-list",[s("nav-link",{staticClass:"mb-1 font-weight-bold",attrs:{title:"Components"}}),s("nav-link",{attrs:{title:"Authentication",href:"#auth"}}),s("nav-link",{attrs:{title:"Upload",href:"#upload"}}),s("nav-link",{attrs:{title:"Search",href:"#search"}}),s("nav-link",{attrs:{title:"File manager",href:"#file-manager"}}),s("nav-link",{attrs:{title:"Data details",href:"#data-details"}}),s("nav-link",{attrs:{title:"Job list",href:"#job-list"}}),s("nav-link",{attrs:{title:"Access control",href:"#access-control"}}),s("nav-link",{attrs:{title:"Add / edit folder",href:"#upsert-folder"}}),s("nav-link",{attrs:{title:"Breadcrumb",href:"#breadcrumb"}})],1)],1),s("v-content",[s("v-container",[s("v-col",{attrs:{xl:"8","offset-xl":"2",lg:"10","offset-lg":"1",md:"12","offset-md":"0"}},[s("div",{staticClass:"display-3"},[e._v("Girder Web Components")]),s("div",{staticClass:"title mb-1"},[e._v("A Vue + Vuetify library for interacting with\n"),s("a",{attrs:{href:"https://www.kitware.com/"}},[e._v("Kitware's")]),e._v("\ndata management platform,\n"),s("a",{attrs:{href:"https://girder.readthedocs.io/en/stable/"}},[e._v("Girder")])]),e._l(e.badges,function(e){return s("img",{key:e,staticClass:"pr-3",attrs:{src:e}})}),s("v-row",{staticClass:"ma-0"},[s("div",{staticClass:"title mb-1"},[e._v("This demo integrates with\n"),s("a",{attrs:{href:"https://data.kitware.com"}},[e._v("data.kitware.com")])]),s("v-switch",{staticClass:"mx-4 my-0",attrs:{"hide-details":"",label:"Dark theme"},model:{value:e.$vuetify.theme.dark,callback:function(t){e.$set(e.$vuetify.theme,"dark",t)},expression:"$vuetify.theme.dark"}})],1),s("a",{attrs:{id:"auth"}}),s("headline",{attrs:{title:"girder-auth",link:"src/components/Authentication/Authentication.vue",description:"allows users to authenticate with girder"}}),s("v-row",{staticClass:"mb-2"},[s("v-switch",{staticClass:"ma-2",attrs:{"hide-details":"",label:"register"},model:{value:e.authRegister,callback:function(t){e.authRegister=t},expression:"authRegister"}}),s("v-switch",{staticClass:"ma-2",attrs:{"hide-details":"",label:"oauth"},model:{value:e.authOauth,callback:function(t){e.authOauth=t},expression:"authOauth"}})],1),e.loggedOut?[s("girder-auth",{key:e.girderRest.token,attrs:{"force-otp":!1,register:e.authRegister,oauth:e.authOauth,"forgot-password-url":e.forgotPasswordUrl}})]:[e.loggedOut?e._e():s("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.girderRest.logout()}}},[e._v("Log Out"),s("v-icon",{staticClass:"pl-2"},[e._v("$vuetify.icons.logout")])],1)],s("a",{attrs:{id:"upload"}}),s("headline",{attrs:{title:"girder-upload",link:"src/components/Upload.vue",description:"upload files to a specified location in girder"}}),s("v-card",[s("girder-upload",{attrs:{dest:e.uploadDest,"post-upload":e.postUpload}})],1),s("a",{attrs:{id:"search"}}),s("headline",{attrs:{title:"girder-search",link:"src/components/Search.vue",description:"provides global search functionality"}}),s("v-toolbar",{attrs:{color:"primary"}},[s("girder-search",{on:{select:e.handleSearchSelect}})],1),s("v-row",[s("v-col",{staticClass:"pr-4",attrs:{xl:"8",lg:"8",md:"6",sm:"12"}},[s("a",{attrs:{id:"file-manager"}}),s("headline",{attrs:{title:"girder-file-manager",link:"src/components/Snippet/FileManager.vue",description:"a wrapper around girder-data-browser.                  It packages the browser with defaults including folder creation, item upload,                  and a breadcrumb bar"}})],1),s("v-col",{staticClass:"pa-0"},[s("a",{attrs:{id:"data-details"}}),s("headline",{attrs:{title:"girder-data-details",link:"src/components/DataDetails.vue",description:"in-depth information and controls for a single                  folder or item, or batch operations for groups of objects."}})],1)],1),s("v-row",[s("v-switch",{staticClass:"ma-2",attrs:{"hide-details":"",label:"Select"},model:{value:e.selectable,callback:function(t){e.selectable=t},expression:"selectable"}}),s("v-switch",{staticClass:"ma-2",attrs:{"hide-details":"",label:"Draggable"},model:{value:e.dragEnabled,callback:function(t){e.dragEnabled=t},expression:"dragEnabled"}}),s("v-switch",{staticClass:"ma-2",attrs:{"hide-details":"",label:"New Folder"},model:{value:e.newFolderEnabled,callback:function(t){e.newFolderEnabled=t},expression:"newFolderEnabled"}}),s("v-switch",{staticClass:"ma-2",attrs:{"hide-details":"",label:"Upload"},model:{value:e.uploadEnabled,callback:function(t){e.uploadEnabled=t},expression:"uploadEnabled"}}),s("v-switch",{staticClass:"mt-2",attrs:{"hide-details":"",label:"Root Disabled"},model:{value:e.rootLocationDisabled,callback:function(t){e.rootLocationDisabled=t},expression:"rootLocationDisabled"}})],1),s("v-row",[s("v-col",{staticClass:"pr-4",attrs:{lg:"8",md:"6",sm:"12"}},[s("girder-file-manager",{ref:"girderFileManager",attrs:{"items-per-page-options":[10,20,-1],"drag-enabled":e.dragEnabled,"new-folder-enabled":e.newFolderEnabled,selectable:e.selectable,location:e.location,"root-location-disabled":e.rootLocationDisabled,"upload-multiple":e.uploadMultiple,"upload-enabled":e.uploadEnabled},on:{"update:location":function(t){e.location=t}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),s("v-col",{staticClass:"pl-0",attrs:{lg:"4",md:"6",sm:"12"}},[s("girder-data-details",{attrs:{value:e.detailsList},on:{action:e.handleAction}})],1)],1),s("a",{attrs:{id:"job-list"}}),s("headline",{attrs:{title:"girder-job-list",link:"src/components/Job/JobList.vue",description:"display and filter girder jobs"}}),s("girder-job-list"),s("a",{attrs:{id:"access-control"}}),s("headline",{attrs:{title:"girder-access-control",link:"src/components/AccessControl.vue",description:"access controls for folders and items"}}),s("girder-access-control",{attrs:{model:e.uploadDest}}),s("a",{attrs:{id:"upsert-folder"}}),s("headline",{attrs:{title:"girder-upsert-folder",link:"src/components/UpsertFolder.vue",description:"create and edit folders"}}),s("v-switch",{attrs:{label:"Edit Mode"},model:{value:e.upsertEdit,callback:function(t){e.upsertEdit=t},expression:"upsertEdit"}}),s("v-card",[s("girder-upsert-folder",{attrs:{location:e.uploadDest,edit:e.upsertEdit}})],1),s("a",{attrs:{id:"breadcrumb"}}),s("headline",{attrs:{title:"girder-breadcrumb",link:"src/components/Breadcrumb.vue",description:"filesystem path breadcrumb"}}),s("v-card",{staticClass:"pa-4"},[s("girder-breadcrumb",{attrs:{location:e.uploadDest}})],1)],2)],1)],1)],1)},fa=[],ga=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"girder-data-browser-snippet"},[s("girder-data-browser",{ref:"girderBrowser",attrs:{location:e.internalLocation,selectable:e.selectable,draggable:e.dragEnabled,"root-location-disabled":e.rootLocationDisabled,value:e.value,"initial-items-per-page":e.initialItemsPerPage,"items-per-page-options":e.itemsPerPageOptions},on:{"update:location":function(t){e.internalLocation=t},input:function(t){return e.$emit("input",t)},"selection-changed":function(t){return e.$emit("selection-changed",t)},rowclick:function(t){return e.$emit("rowclick",t)},"row-right-click":e.rowRightClick,drag:function(t){return e.$emit("drag",t)},dragstart:function(t){return e.$emit("dragstart",t)},dragend:function(t){return e.$emit("dragend",t)},drop:function(t){return e.$emit("drop",t)}},scopedSlots:e._u([{key:"breadcrumb",fn:function(e){return[s("girder-breadcrumb",{attrs:{location:e.location,"root-location-disabled":e.rootLocationDisabled},on:{crumbclick:function(t){return e.changeLocation(t)}}})]}},{key:"headerwidget",fn:function(){return[e._t("headerwidget"),e.shouldShowUpload?s("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({staticClass:"ma-0",attrs:{text:"",small:""}},a),[s("v-icon",{staticClass:"mdi-24px mr-1",attrs:{left:"",color:"accent"}},[e._v("$vuetify.icons.fileNew")]),s("span",{staticClass:"hidden-xs-only"},[e._v("Upload")])],1)]}}],null,!1,3152549835),model:{value:e.uploaderDialog,callback:function(t){e.uploaderDialog=t},expression:"uploaderDialog"}},[s("girder-upload",{attrs:{dest:e.uploadDest,"pre-upload":e.preUpload,"post-upload":e.postUploadInternal,multiple:e.uploadMultiple,"max-show":e.uploadMaxShow,accept:e.uploadAccept}})],1):e._e(),e.newFolderEnabled&&!e.isRootLocation(e.internalLocation)&&e.girderRest.user?s("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({staticClass:"ma-0",attrs:{text:"",small:""}},a),[s("v-icon",{staticClass:"mdi-24px mr-1",attrs:{left:"",color:"accent"}},[e._v("$vuetify.icons.folderNew")]),s("span",{staticClass:"hidden-xs-only"},[e._v("New Folder")])],1)]}}],null,!1,1119178578),model:{value:e.newFolderDialog,callback:function(t){e.newFolderDialog=t},expression:"newFolderDialog"}},[s("girder-upsert-folder",{key:e.internalLocation._id,attrs:{location:e.internalLocation,"pre-upsert":e.preUpsert,"post-upsert":e.postUpsertInternal},on:{dismiss:function(t){e.newFolderDialog=!1}}})],1):e._e()]},proxy:!0},{key:"row-widget",fn:function(t){return[e._t("row-widget",null,null,t)]}}],null,!0)}),s("v-menu",{attrs:{"position-x":e.collectionAndFolderMenu.x,"position-y":e.collectionAndFolderMenu.y,absolute:"","offset-y":"",dark:""},model:{value:e.collectionAndFolderMenu.show,callback:function(t){e.$set(e.collectionAndFolderMenu,"show",t)},expression:"collectionAndFolderMenu.show"}},[s("v-list",{attrs:{dense:""}},[s("v-list-item",{attrs:{disabled:!e.hasAccessPermission},on:{click:function(t){e.showAccessControlDialog=!0}}},[s("v-list-item-title",[e._v("Access control")])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"700px",persistent:"",eager:"",scrollable:""},model:{value:e.showAccessControlDialog,callback:function(t){e.showAccessControlDialog=t},expression:"showAccessControlDialog"}},[e.actOnItem?s("girder-access-control",{attrs:{model:e.actOnItem,"has-permission":e.hasAccessPermission},on:{"update:hasPermission":function(t){e.hasAccessPermission=t},"update:has-permission":function(t){e.hasAccessPermission=t},close:function(t){e.showAccessControlDialog=!1},"model-access-changed":function(t){return e.$refs.girderBrowser.refresh()}}}):e._e()],1)],1)},va=[],ba={components:{GirderAccessControl:ke,GirderBreadcrumb:q,GirderUpload:ca,GirderUpsertFolder:ds,GirderDataBrowser:Ot},props:{value:{type:Array,default:()=>[]},location:{type:Object,validator:O(!0),default:null},rootLocationDisabled:{type:Boolean,default:!1},noAccessControl:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},dragEnabled:{type:Boolean,default:!1},uploadEnabled:{type:Boolean,default:!1},newFolderEnabled:{type:Boolean,default:!1},uploadMaxShow:{type:Number,default:0},uploadMultiple:{type:Boolean,default:!1},uploadAccept:{type:String,default:"*"},preUpload:{type:Function,default:async()=>{}},postUpload:{type:Function,default:async()=>{}},preUpsert:{type:Function,default:async()=>{}},postUpsert:{type:Function,default:async()=>{}},initialItemsPerPage:{type:Number,default:10},itemsPerPageOptions:{type:Array,default:()=>[10,25,50]}},inject:["girderRest"],data(){return{uploaderDialog:!1,newFolderDialog:!1,lazyLocation:null,collectionAndFolderMenu:{show:!1,x:0,y:0},actOnItem:null,showAccessControlDialog:!1,hasAccessPermission:!1}},computed:{internalLocation:{get(){const{location:e,lazyLocation:t}=this;return e||(t||{type:"root"})},set(e){this.lazyLocation=e,this.$emit("update:location",e)}},uploadDest(){const{internalLocation:e}=this;return e&&"folder"===R(e)?e:null},shouldShowUpload(){return this.uploadEnabled&&!P(this.internalLocation)&&this.girderRest.user&&this.uploadDest}},created(){if(!O(!this.rootLocationDisabled)(this.internalLocation))throw new Error("root location cannot be used when root-location-disabled is true")},methods:{isRootLocation:P,refresh(){this.$refs.girderBrowser.refresh()},postUploadInternal(){return this.$refs.girderBrowser.refresh(),this.uploaderDialog=!1,Promise.all([new Promise(e=>setTimeout(e,400)),this.postUpload()])},postUpsertInternal(){return this.$refs.girderBrowser.refresh(),this.newFolderDialog=!1,Promise.all([new Promise(e=>setTimeout(e,400)),this.postUpsert()])},rowRightClick(e,t){this.noAccessControl||-1!==["collection","folder"].indexOf(e._modelType)&&(t.preventDefault(),this.collectionAndFolderMenu.show=!1,this.collectionAndFolderMenu.x=t.clientX,this.collectionAndFolderMenu.y=t.clientY,this.actOnItem=e,this.$nextTick(()=>{this.collectionAndFolderMenu.show=!0}))}}},ya=ba,wa=Object(E["a"])(ya,ga,va,!1,null,null,null),_a=wa.exports;M()(wa,{VBtn:Z["a"],VCard:ee["a"],VDialog:gs["a"],VIcon:z["a"],VList:ie["a"],VListItem:oe["a"],VListItemTitle:le["c"],VMenu:ce["a"]});var xa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"headline font-weight-bold mono mt-8"},[e._v(e._s(e.title)),s("v-btn",{staticClass:"ml-2",attrs:{icon:"",href:e.repoBase+e.link,title:"View source"}},[s("v-icon",[e._v("$vuetify.icons.externalLink")])],1)],1),s("div",{staticClass:"subtitle-1 mb-4"},[e._v(e._s(e.description))])])},ka=[];const Ca="https://github.com/girder/girder_web_components/blob/master/";var $a={props:{title:{type:String,required:!0},description:{type:String,required:!0},link:{type:String,required:!0}},data:()=>({repoBase:Ca})},Sa=$a,Ta=(s("77d4"),Object(E["a"])(Sa,xa,ka,!1,null,"5d765188",null)),Va=Ta.exports;M()(Ta,{VBtn:Z["a"],VIcon:z["a"]});var Ra=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-list-item",e._g({attrs:{link:!!e.href,href:e.href}},e.listeners),[s("v-list-item-content",[s("v-list-item-title",[e._v(e._s(e.title))])],1)],1)},Pa=[],ja={props:{title:{type:String,required:!0},href:{type:String,default:null}},computed:{listeners(){return this.href?{click:()=>{this.$vuetify.goTo(this.href)}}:{}}}},Oa=ja,Ia=Object(E["a"])(Oa,Ra,Pa,!1,null,null,null),La=Ia.exports;M()(Ia,{VListItem:oe["a"],VListItemContent:le["a"],VListItemTitle:le["c"]});var Fa={name:"App",inject:["girderRest"],components:{Headline:Va,NavLink:La,GirderAccessControl:ke,GirderAuth:vt,GirderBreadcrumb:q,GirderDataDetails:ys,GirderFileManager:_a,GirderJobList:qs,GirderSearch:fe,GirderUpload:ca,GirderUpsertFolder:ds},data(){return{authOauth:!0,authRegister:!0,dragEnabled:!1,forgotPasswordUrl:"/#?dialog=resetpassword",internalLocation:null,rootLocationDisabled:!1,selected:[],selectable:!0,uploadEnabled:!0,uploadMultiple:!0,upsertEdit:!1,newFolderEnabled:!0,badges:["https://img.shields.io/circleci/build/github/girder/girder_web_components/master?style=for-the-badge","https://img.shields.io/npm/v/@girder/components?style=for-the-badge","https://img.shields.io/npm/dm/@girder/components?style=for-the-badge","https://img.shields.io/bundlephobia/min/@girder/components?style=for-the-badge","https://img.shields.io/github/stars/girder/girder_web_components?style=for-the-badge"]}},computed:{loggedOut(){return null===this.girderRest.user},location:{get(){return this.internalLocation||(this.loggedOut?{_id:"5c8a72438d777f072b97f9e1",_modelType:"folder"}:this.girderRest.user)},set(e){this.internalLocation=e}},uploadDest(){return"folder"===this.location._modelType?this.location:{name:"temp",_id:"5e2a25fdaf2e2eed35309112",_modelType:"folder"}},detailsList(){return this.selected.length?this.selected:this.location&&this.location._id?[this.location]:[]}},methods:{handleSearchSelect(e){["user","folder"].indexOf(e._modelType)>=0?this.location=e:this.location={_modelType:"folder",_id:e.folderId}},handleAction(e){"Delete"===e.name&&(this.$refs.girderFileManager.refresh(),this.selected=[])},postUpload(){this.$refs.girderFileManager.refresh()}}},Da=Fa,Ea=(s("5127"),s("7496")),Ua=s("a75b"),Ma=s("f774"),Aa=Object(E["a"])(Da,ma,fa,!1,null,"7dbe6e75",null),Na=Aa.exports;M()(Aa,{VApp:Ea["a"],VBtn:Z["a"],VCard:ee["a"],VCol:ae["a"],VContainer:Ie["a"],VContent:Ua["a"],VIcon:z["a"],VList:ie["a"],VNavigationDrawer:Ma["a"],VRow:pe["a"],VSwitch:_e["a"],VToolbar:ss["a"]}),a["a"].use(pa);const za=new nt({apiRoot:"https://data.kitware.com/api/v1"}),Ba=new ha(za,{useEventSource:!0});za.fetchUser().then(e=>{e&&Ba.connect(),new a["a"]({vuetify:ua,render:e=>e(Na),provide:{girderRest:za,notificationBus:Ba}}).$mount("#app")})},af69:function(e,t,s){},c27d:function(e,t,s){"use strict";var a=s("97f4"),r=s.n(a);r.a},e136:function(e,t,s){},e589:function(e,t,s){"use strict";var a=s("406f"),r=s.n(a);r.a},e738:function(e,t,s){"use strict";var a=s("575a"),r=s.n(a);r.a},e837:function(e,t,s){"use strict";var a=s("01f8"),r=s.n(a);r.a},f94b:function(e,t,s){}});
//# sourceMappingURL=app.c3cdd58f.js.map